
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Woodstock Blog</title>
  <meta name="author" content="Charlie Brown">

  
  <meta name="description" content="ref Distributed hash table A distributed hash table (DHT) is a class of a decentralized distributed system that provides a lookup service similar to &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://okckd.github.io/posts/2">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Woodstock Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-52495723-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Woodstock Blog</a></h1>
  
    <h2>What's the good of living if you don't try a few things?</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:okckd.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/06/distributed-hash-table/">[Design] Distributed Hash Table</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-01-06T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2015/01/06/distributed-hash-table/#disqus_thread"
             data-disqus-identifier="http://okckd.github.io/blog/2015/01/06/distributed-hash-table/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://blog.csdn.net/yfkiss/article/details/6977509">ref</a></p>

<h3>Distributed hash table</h3>

<p><strong>A <a href="http://en.wikipedia.org/wiki/Distributed_hash_table">distributed hash table</a> (DHT) is a class of a decentralized distributed system</strong> that provides a lookup service similar to a hash table. (key,value) pairs are stored in a DHT, and any participating node can efficiently retrieve the value associated with a given key.</p>

<p>对于一个key/value对，DHT在分布式集群中，提供像HashTable一样的服务，例如简单快捷的存取、查询。</p>

<p><img class="middle" src="/assets/images/DHT.png"></p>

<p>DHTs form an infrastructure that can be used to build more complex services, such as anycast, cooperative Web caching, distributed file systems, domain name services, instant messaging, multicast, and also <strong>peer-to-peer file sharing</strong> and content distribution systems.</p>

<h4>Properties</h4>

<p>Unlike unstructured P2P, <strong>DHT is tightly coupled between nodes and file locations</strong>. (when request a content, directly go to the content instead of <strong>searching by flooding</strong>)</p>

<p>DHT has the following properties:</p>

<ol>
<li><p><strong>Autonomy and Decentralization</strong>: the nodes collectively form the system without any central coordination.</p></li>
<li><p><strong>Fault tolerance</strong>: the system should be reliable (in some sense) even with nodes continuously joining, leaving, and failing.</p></li>
<li><p><strong>Scalability</strong>: the system should function efficiently even with thousands or millions of nodes.</p></li>
</ol>


<h4>Building a DHT</h4>

<ol>
<li>Hash function that maps a file to a unique ID. Eg. hash(&ldquo;Harry Potter&rdquo;) &ndash;> 3912.</li>
<li>Distribute <strong>range space</strong> for all nodes in the network.</li>
<li>The desinated node stores the location of the file. (this is indirect approach)</li>
</ol>


<p><img class="middle" src="/assets/images/range-space.PNG"></p>

<h4>Search in DHT</h4>

<ol>
<li>Search query <strong>routed to the node whose range covers the file</strong>.</li>
<li>Each node would retains a <strong>routing information</strong> that is implemented in a fully distributed manner (i.e. no central point, no single point of failure).</li>
</ol>


<p>There is different hashing and routing techniques associated with DHT. The most important is <strong>Consistent Hashing</strong> and <strong>Chord Routing</strong>.</p>

<h3>Consistent Hashing</h3>

<p>&mdash;<a href="http://en.wikipedia.org/wiki/Consistent_hashing">Consistent hashing</a><strong> is a special kind of hashing such that when a hash table is resized and consistent hashing is used, </strong>only K/n keys need to be remapped__ on average, where K is the number of keys, and n is the number of slots.</p>

<h4>Motivation</h4>

<p>In most traditional hash tables, a change in the number of array slots causes <strong>nearly all keys</strong> to be remapped. Specifically, <a href="http://blog.csdn.net/sparkliang/article/details/5279393">the 3 cases below</a> can end up in a technology crisis:</p>

<ol>
<li><p>leaves/failures &ndash; 一个 cache 服务器 m down 掉了（在实际应用中必须要考虑这种情况），这样所有映射到 cache m 的对象都会失效，怎么办，需要把 cache m 从 cache 中移除，这时候 cache 是 N-1 台，映射公式变成了 hash(object)%(N-1)；</p></li>
<li><p>join &ndash; 由于访问加重，需要添加 cache ，这时候 cache 是 N+1 台，映射公式变成了 hash(object)%(N+1)</p></li>
<li><p>scalability &ndash; 由于硬件能力越来越强，你可能想让后面添加的节点多做点活，显然上面的 hash 算法也做不到。</p></li>
</ol>


<h4>Technique</h4>

<p>Consistent hashing is based on mapping each object to a point on the edge of a circle. The system maps each available machine to pseudo-randomly distributed points on the edge of the same circle.</p>

<ol>
<li>假定哈希key均匀的分布在一个环上</li>
<li>所有的节点也都分布在同一环上</li>
<li>每个节点只负责一部分Key，当节点加入、退出时只影响加入退出的节点和其邻居节点或者其他节点只有少量的Key受影响</li>
</ol>


<p>For a very detailed steps of consistent hashing, read <a href="http://blog.csdn.net/sparkliang/article/details/5279393">this Chinese blog</a>.</p>

<p><img class="middle" src="/assets/images/consistent-hashing.PNG"></p>

<p>In this way, 一致性Hash在node加入/离开时，不会导致映射关系的重大变化。</p>

<h3>Routing (searching)</h3>

<p><strong>Simple Routing</strong> would search successor node, and runtime is linear. These node would keep O(1) <strong>routing information</strong>, and spend O(n) time in <strong>query routing</strong>.</p>

<p>Otherwise, we make every node store ID and IP of all nodes, thus query routing takes O(1) but routing information is O(n).</p>

<p>We&rsquo;ll now discuss <strong>Chord Routing</strong>.</p>

<h4>Chord Routing</h4>

<p>Each node stores more info <strong>closely following it</strong> on the identifier circle than nodes further away. That is, the subsequent nodes at position 1, 2, 4, 8, 16, 32&hellip; (each entry is called a <strong>finger</strong>)</p>

<p><img class="middle" src="/assets/images/chord-routing.PNG"></p>

<p>为网络中每个Node分配一个唯一id（可以通过机器的mac地址做Hash），假设整个网络有N 个节点，我们可以认为这些整数首尾相连形成一个环，称之为Chord环。两个节点间的距离定义为节点间下标差，每个节点会存储一张路由表(Finger表)，表内顺时针按照离本节点2、4、8、16、32.……2i的距离选定log2N个其他节点的ip信息来记录。</p>

<p><strong>Routing information</strong> maintained at each node: O(logN).</p>

<p><strong>Query routing</strong> take O(logN) time.</p>

<h3>Join and leave in Chord</h3>

<p>It&rsquo;s very much like insertion and removal in Doubly Linked List. Read it yourself.</p>

<p><img class="middle" src="/assets/images/join-in-chord.PNG"></p>

<p>Special thanks to the online resources written by some CSDN bloggers.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/06/cloud-grid-cluster/">[Design] Cloud, Grid and Cluster</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-01-06T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2015/01/06/cloud-grid-cluster/#disqus_thread"
             data-disqus-identifier="http://okckd.github.io/blog/2015/01/06/cloud-grid-cluster/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://stackoverflow.com/questions/9723040/what-is-the-difference-between-cloud-grid-and-cluster">ref</a></p>

<h3>Cluster VS. Grid</h3>

<p><strong><a href="http://stackoverflow.com/a/9753568">Cluster differs</a> from Cloud and Grid in that</strong></p>

<ol>
<li>a cluster is a group of computers connected by a local area network (LAN)</li>
<li>cloud and grid are more wide scale and can be geographically distributed.</li>
</ol>


<p>Another way to put it is to say that</p>

<ol>
<li>a cluster is tightly coupled</li>
<li>a Grid or a cloud is loosely coupled.</li>
</ol>


<p>Also, <strong>the hardware</strong>:</p>

<ol>
<li>clusters are made up of machines with similar hardware</li>
<li>clouds and grids are made up of machines with possibly very different hardware configurations.</li>
</ol>


<h3>Computer cluster</h3>

<p><strong><a href="http://en.wikipedia.org/wiki/Computer_cluster">A computer cluster</a></strong> consists of a set of tightly connected computers that work together as a single system.</p>

<p>Unlike grid computers, computer clusters have each node set to <strong>perform the same task</strong>, controlled and scheduled by software.</p>

<p>In most circumstances, all of the nodes use the <strong>same hardware and OS</strong>. They are connected in <strong>LAN</strong> with each node running its <strong>own piece</strong> of OS.</p>

<p>They are used to improve <strong>performance</strong> and <strong>availability</strong> over that of a single computer, while being more <strong>cost effective</strong>.</p>

<p>Computer clusters emerged as a result of:</p>

<ol>
<li>low-cost microprocessors,</li>
<li>high-speed networks,</li>
<li>software for high-performance distributed computing</li>
</ol>


<h3>Grid computing</h3>

<p><strong><a href="http://en.wikipedia.org/wiki/Grid_computing">Grid computing</a></strong> is the collection of computer resources from multiple locations to reach a common goal. Each computer have <strong>non-interactive workloads</strong>. It&rsquo;s like a <strong>&ldquo;super virtual computer”</strong> composed of many networked loosely coupled computers acting together to perform large tasks.</p>

<p>Unlike conventional high performance computing systems such as <strong>cluster computing</strong>, grid computers have each node set to <strong>perform a different task</strong>.</p>

<p>Grid computers also tend to be more <strong>geographically dispersed</strong> than cluster computers. Grids are often constructed with general-purpose grid middleware software libraries.</p>

<p>Major disadvantage with Grid Computing is, <strong>if one piece of software on a node fails</strong>, other pieces of the software on the other nodes may fail.</p>

<h3>Cloud computing</h3>

<p><strong><a href="http://en.wikipedia.org/wiki/Cloud_computing">Cloud computing</a></strong> is terminology based on utility and <strong>consumption of computing resources</strong>.</p>

<h4>SaaS</h4>

<p>An application doesn&rsquo;t access resources it requires directly, rather it accesses them through <strong>something <a href="http://stackoverflow.com/a/1068133">like a service</a></strong>. Instead of talking to a specific hard drive for storage, and a specific CPU for computation, etc, it talks to some <strong>service that provides these resources</strong>. The service then maps any requests for resources to its physical resources.</p>

<p>The services themselves <a href="http://stackoverflow.com/a/9753568">have long been referred to</a> as <strong>Software as a Service (SaaS)</strong>. The datacenter hardware and software is what we call <strong>a Cloud</strong>. When a Cloud is made available in a pay-as-you-go manner to the general public, we call it a <strong>Public Cloud</strong>; the service being sold is <strong>Utility Computing</strong>.</p>

<h4>Sharing of Resources</h4>

<p>Usually the service <strong>dynamically allocate resources</strong> to maximize the effectiveness of the shared resources(per users and per demand).</p>

<p>For example, a cloud computer facility that serves European users during European business hours with a specific application (e.g., email) may reallocate the same resources to serve North American users during North America&rsquo;s business hours with a different application (e.g., a web server).</p>

<p>With cloud computing, multiple users can access a single server to retrieve and update their data <strong>without purchasing licenses for different applications</strong>.</p>

<h4>Scalability</h4>

<ol>
<li><p>If an application requires only <strong>a small amount of some resource</strong>, say computation, then the service only allocates a small amount, say a small share on a single physical CPU.</p></li>
<li><p>If the application requires <strong>a large amount of some resource</strong>, then the service allocates that large amount, say a grid of CPUs.</p></li>
</ol>


<p>All the complex handling and coordination is performed <strong>by the service, not the application</strong>. In this way the application can scale well.</p>

<p><a href="http://stackoverflow.com/a/1068133">For example</a> a web site written &ldquo;on the cloud&rdquo; may share a server with many other web sites while it has a low amount of traffic. If it ever has massive amounts of traffic, it may be moved to its own dedicated server, or <strong>grid of servers</strong>. This is all handled <strong>by the cloud service (provider)</strong>, so the application shouldn&rsquo;t have to be modified drastically to cope.</p>

<h4>Other Advantages</h4>

<p>Using Cloud Computing, companies can <a href="http://www.ibeehosting.com/blog/what-is-the-difference-between-cloud-computing-and-grid-computing.html">scale upto High capacities</a> immediately without investing in new infrastructure, training the people or new software licensing. It is more useful for small and medium scale businesses who wants to outsource their Data Center infrastructure, or some larger companies also prefer if they want to cut down the costs of building data-centers internally in order to get peak load capacity. In short, consumers use what they need and pay accordingly.</p>

<h3>Grid Computing VS. Cloud Computing</h3>

<ol>
<li><p>Grid Computing is the parent of Cloud computing, cloud actually evolves from Grid Computing.</p></li>
<li><p>A cloud would usually use a grid. A grid is not necessarily a cloud.</p></li>
<li><p>Resource distribution: Cloud computing is a centralized model whereas grid computing is a decentralized model where the computation could occur over many administrative domains.</p></li>
<li><p>Ownership: A grid is a collection of computers which is owned by multiple parties in multiple locations and connected together so that users can share the combined power of resources. Whereas a cloud is a collection of computers usually owned by a single party.</p></li>
</ol>


<h4>Examples</h4>

<p>Examples of Clouds: Amazon Web Services (AWS), Google App Engine, Dropbox, Gmail, Facebook, Youtube, Rapidshare</p>

<p>Examples of Grids: FutureGrid</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/06/big-data-storage/">[Design] Big Data Storage</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-01-06T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2015/01/06/big-data-storage/#disqus_thread"
             data-disqus-identifier="http://okckd.github.io/blog/2015/01/06/big-data-storage/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://www.mitbbs.com/article/JobHunting/32580869_0.html">ref</a></p>

<h3>Question</h3>

<p><strong>Given 1 trillion messages</strong> on fb and each message has at max 10 words.</p>

<p>How do you build the <strong>index table</strong> and how many machines do you need on the <strong>cluster</strong> to store the index table?</p>

<h3>One possible answer</h3>

<p>Total data = 1 trillion * 10 words * 6 bytes / word = 60TB = one small NetApp box</p>

<p><strong>Index by hashed userid</strong>; will distribute traffic effectively across servers; cache active users recent messages in memory.</p>

<p><a href="http://www.glassdoor.com/Interview/Given-a-set-of-n-jobs-with-start-time-end-time-cost-find-a-subset-so-that-no-2-jobs-overlap-and-the-cost-is-maximum-QTN_440168.htm">Cannot use Netapp box</a>. From what I read in FB engg blog, they have all the info in main memory of server.</p>

<p>Total data = 1 trillion * 10 words * 6 bytes / word = 60TB + 1TB for Indexes.</p>

<p>Considering servers have 64 GB ram. 61 GB usable to store index, 1000 servers.</p>

<h4>For more information</h4>

<p>Read 2 other posts: <strong>[Design] Distributed hash table</strong> and <strong>[Design] Cloud, Grid and Cluster</strong>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/06/Json-prettifier/">[Facebook] Write a Json Prettifier</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-01-06T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2015/01/06/Json-prettifier/#disqus_thread"
             data-disqus-identifier="http://okckd.github.io/blog/2015/01/06/Json-prettifier/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Question</h3>

<p><a href="http://www.glassdoor.com/Interview/Write-a-function-to-prettify-Json-objects-QTN_151361.htm">link</a></p>

<p>Input:</p>

<pre><code>{"firstName":"John","lastName":"Smith","isAlive":true,"age" :25,"height_cm":167.6,"address":{"streetAddress":"212ndStre et","city":"NewYork","state":"NY","postalCode":"10021-3100" },"phoneNumbers":[{"type":"home","number":"212555-1234"},{" type":"office","number":"646555-4567"}],"children":[],"spou se":null}
</code></pre>

<p>Output:</p>

<pre><code>{
  "firstName": "John",
  "lastName": "Smith",
  "isAlive": true,
  "age": 25,
  "height_cm": 167.6,
  "address": {
    "streetAddress": "21 2nd Street",
    "city": "New York",
    "state": "NY",
    "postalCode": "10021-3100"
  },
  "phoneNumbers": [
    {
      "type": "home",
      "number": "212 555-1234"
    },
    {
      "type": "office",
      "number": "646 555-4567"
    }
  ],
  "children": [],
  "spouse": null
}
</code></pre>

<h3>Solution</h3>

<p>Since I did not find anything useful online, I spent an hour writing the following code. These are the things to take into consideration:</p>

<ol>
<li><p><strong>Line break</strong> after a comma, a left bracket, or prior to a right bracket. A special pattern is &ldquo;},&rdquo; &ndash; we only do line break once after the comma.</p></li>
<li><p><strong>Indentation</strong> is important. It&rsquo;s a little complex cuz we reduce indentation <strong>BEFORE</strong> printing out a right bracket, but increase indentation <strong>AFTER the left bracket</strong>.</p></li>
</ol>


<h3>Code</h3>

<pre><code>public void prettify(String input) throws Exception {

    // observation the rules for Json format:
    // 1. each line end with either a { , or }
    // 2. indentation depends on number of brackets
    int len = input.length();
    int left = 0;
    int right = 0;
    int tab = 0;

    while (left &lt; len) {
        // first, advance right pointer to the next line break point
        while (right &lt; len) {
            if (input.charAt(right) == '}' || input.charAt(right) == ']') {
                // first case, if point to a closing bracket
                tab--;
                // indentation should change right away should we find a
                // closing bracket
                if (right + 1 &lt; len &amp;&amp; input.charAt(right + 1) != ',') {
                    break;
                }
            } else if (input.charAt(right) == ','
                    || input.charAt(right) == '{'
                    || input.charAt(right) == '[') {
                // second case, break at , or {
                break;
            } else if (right + 1 &lt; len
                    &amp;&amp; (input.charAt(right + 1) == '}' || input
                            .charAt(right + 1) == ']')) {
                // third case, break prior to }
                // we need not swap the order of first and third case,
                // because when we found a closing bracket, we need to
                // change indentation right away
                break;
            }
            right++;
        }

        // now print the chars from left pointer to right inclusively
        if (right == len) {
            // end of input
            if (tab != 0) {
                throw new Exception("Json format error!");
            }
            right--;
            // this is for the convenience of printing last line
        }
        printIndentation(tab);
        System.out.println(input.substring(left, right + 1));
        if (input.charAt(right) == '{' || input.charAt(right) == '[') {
            tab++;
        }

        // last, update pointers
        left = ++right;
    }
}

private void printIndentation(int tab) {
    for (int i = 0; i &lt; tab; i++) {
        System.out.print("    ");
    }
}
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/12/27/database-indexing/">[Design] Database Indexing</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-12-27T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2014/12/27/database-indexing/#disqus_thread"
             data-disqus-identifier="http://okckd.github.io/blog/2014/12/27/database-indexing/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://stackoverflow.com/a/1130">ref 1</a> <a href="http://www.interspire.com/content/2006/02/15/introduction-to-database-indexes/">ref 2</a></p>

<h3>Why Indexing?</h3>

<p>In database disks (we&rsquo;re talking about disk-based storage devices), data is stored as blocks. These blocks are accessed atomically. It&rsquo;s like a linked list with pointers to the blocks.</p>

<p>Because of this, searching in database is linear time. That&rsquo;s why we need indexing.</p>

<p><strong>Indexing is a way of sorting a number of records on multiple fields</strong>. Creating an index on a field in a table creates another data structure which holds the field value, and pointer to the record it relates to. This index structure is then sorted, allowing Binary Searches to be performed on it.</p>

<p>In other words, indexing speed up search.</p>

<h3>Downside</h3>

<p>First disadvantage is <strong>the additional space usage</strong>. For example, in MyISAM engine, indexes are stored together with the data in one table. So the indexing files can quickly reach the size limits if many fields are indexed.</p>

<p>Second disadvantage is that <strong>using too many indexes can actually slow your database down</strong>. Each time a page or database row is updated or removed, the reference or index also has to be updated.</p>

<p>So indexes speed up finding data, but slow down inserting, updating or deleting data.</p>

<h3>Primary keys</h3>

<p><strong>Some fields are automatically indexed</strong>.</p>

<p>A primary key or a field marked as ‘unique’ – for example an email address, a userid or a social security number – are <strong>automatically indexed</strong> so the database can quickly check to make sure that you’re not going to introduce bad data.</p>

<h3>When to use</h3>

<p>Since indexes are <strong>only</strong> used to speed up the searching, it&rsquo;s not wise to have indexing used only for output.</p>

<p><strong>The general rule</strong> is, anything that is used to limit the number of results you’re trying to find. For more details, read <a href="http://www.interspire.com/content/2006/02/15/introduction-to-database-indexes/">ref 2</a>.</p>

<h3>How to create index</h3>

<p><a href="http://stackoverflow.com/a/1157">The following</a> is SQL92 standard that&rsquo;s supported by major RDMBSs:</p>

<pre><code>CREATE INDEX [index name] ON [table name] ( [column name] )
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/12/23/Java-runtime-exception/">[Java OOP] Java Runtime Exception</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-12-23T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2014/12/23/Java-runtime-exception/#disqus_thread"
             data-disqus-identifier="http://okckd.github.io/blog/2014/12/23/Java-runtime-exception/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Exceptions in Java</h3>

<p>In Java, there are <a href="http://www.tutorialspoint.com/java/java_exceptions.htm">3 categories of exceptions</a>:</p>

<ol>
<li><p>checked exceptions</p>

<ol>
<li>Typically a user error</li>
<li>eg. if a file cannot be found.</li>
<li>These exceptions cannot simply be ignored at the time of compilation.</li>
</ol>
</li>
<li><p>runtime exceptions (also called un-checked exceptions)</p>

<ol>
<li>exception that could have been avoided by the programmer</li>
<li>eg. NullPointerException</li>
<li>ignored at the time of compilation</li>
</ol>
</li>
<li><p>error</p>

<ol>
<li>These are not exceptions at all</li>
<li>eg. stack overflow occurs</li>
<li>also ignored at the time of compilation</li>
</ol>
</li>
</ol>


<h4>1. checked exception</h4>

<p><a href="http://stackoverflow.com/a/2190175">A checked exception</a> <strong>must be handled explicitly</strong> by the code (by either putting a try/catch block around the code, or adding a &ldquo;throws&rdquo; clause to the method).</p>

<p>The <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html">class Exception</a> and any subclasses that are not also subclasses of RuntimeException are <strong>checked exceptions</strong>.</p>

<p>Note: <strong>java.lang.RuntimeException</strong> is a subclass of <strong>java.lang.Exception</strong>.</p>

<h4>2. un-checked exceptions (RuntimeException)</h4>

<p>A un-checked exception <strong>does not need</strong> to be explicitly handled.</p>

<p><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/RuntimeException.html">RuntimeException</a> and its subclasses are <strong>unchecked exceptions</strong>.</p>

<p><a href="http://stackoverflow.com/a/2190177">Generally</a> RuntimeExceptions <strong>can be prevented</strong> programmatically. E.g NullPointerException, ArrayIndexOutOfBoundException. If you check for null before calling any method, NullPointerException would never occur. Similarly ArrayIndexOutOfBoundException would never occur if you check the index first. RuntimeException are not checked by the compiler, so it is clean code.</p>

<p>The runtime exception classes <strong><a href="http://stackoverflow.com/a/2190659">are exempted</a> from compile-time checking</strong>, since the compiler cannot establish that run-time exceptions cannot occur.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/12/23/Endless-error-gem-dependencies/">[Ruby] Endless Error With Gem Dependencies</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-12-23T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2014/12/23/Endless-error-gem-dependencies/#disqus_thread"
             data-disqus-identifier="http://okckd.github.io/blog/2014/12/23/Endless-error-gem-dependencies/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>The problem</h3>

<p>In setting up the octopress environment, we need to install dependencies like this:</p>

<pre><code>gem install bundler
bundle install
</code></pre>

<p>First line simply installs bundler (a Ruby dependency manager). The second line is where you might face problems:</p>

<blockquote><p>bundle install</p>

<p><a href="http://bundler.io/man/bundle-install.1.html">Install the dependencies</a> specified in your Gemfile</p></blockquote>

<p>Look at the Gemfile in your octopress folder, it looks like <a href="https://github.com/imathis/octopress/blob/master/Gemfile">this</a>:</p>

<pre><code>source "https://rubygems.org"

group :development do
  gem 'rake', '~&gt; 10.0'
  gem 'jekyll', '~&gt; 2.0'
  gem 'octopress-hooks', '~&gt; 2.2'
  gem 'octopress-date-format', '~&gt; 2.0'
  gem 'jekyll-sitemap'
  gem 'rdiscount', '~&gt; 2.0'
  gem 'RedCloth', '~&gt; 4.2.9'
  gem 'haml', '~&gt; 4.0'
  gem 'compass', '~&gt; 1.0.1'
  gem 'sass-globbing', '~&gt; 1.0.0'
  gem 'rubypants', '~&gt; 0.2.0'
  gem 'rb-fsevent', '~&gt; 0.9'
  gem 'stringex', '~&gt; 1.4.0'
end

gem 'sinatra', '~&gt; 1.4.2'
</code></pre>

<p>When I do &lsquo;bundle install&rsquo;:</p>

<pre><code>$ bundle install
Fetching gem metadata from https://rubygems.org/........
Resolving dependencies...

Gem::RemoteFetcher::FetchError: SSL_connect returned=1 errno=0 state=SSLv3 read
server certificate B: certificate verify failed (https://rubygems.org/gems/rake-
10.4.2.gem)
An error occurred while installing rake (10.4.2), and Bundler cannot continue.
Make sure that `gem install rake -v '10.4.2'` succeeds before bundling.
</code></pre>

<p>It shows the gem &lsquo;rake&rsquo; is missing. So I did as I was instrcucted to. I type <strong>gem install rake -v &lsquo;10.4.2&rsquo;</strong> into command line, and execute. Again, I was told another gem missing. I kept doing this, until I found this is an endless procedure:</p>

<pre><code>$ bundle install
Fetching gem metadata from https://rubygems.org/.......
Using rake 10.3.2
Using RedCloth 4.2.9
Using blankslate 2.1.2.4

Gem::RemoteFetcher::FetchError: SSL_connect returned=1 errno=0 state=SSLv3 read
server certificate B: certificate verify failed (https://rubygems.org/gems/timer
s-1.1.0.gem)
An error occurred while installing timers (1.1.0), and Bundler cannot continue.
Make sure that `gem install timers -v '1.1.0'` succeeds before bundling.
</code></pre>

<p>Something is very wrong with the execution of &lsquo;bundle install&rsquo;.</p>

<h3>The solution</h3>

<p>Until I found <a href="http://stackoverflow.com/questions/15529451/octopress-installation-stops-during-bundle-install">this post</a>, I was hopelessly searching and learning Ruby gems and related things.</p>

<p>I fact, I just deleted 1 letter by changing <strong>source &ldquo;<a href="https://rubygems.org">https://rubygems.org</a>&rdquo;</strong> to <strong>source &ldquo;<a href="http://rubygems.org">http://rubygems.org</a>&rdquo;</strong> at line 1 of Gemfile in octopress folder.</p>

<p>Then, everything is fine:</p>

<pre><code>$ bundle install
Fetching gem metadata from http://rubygems.org/........
Resolving dependencies....
Installing rake 10.4.2
Using RedCloth 4.2.9
Using blankslate 2.1.2.4
Installing hitimes 1.2.2
Installing timers 4.0.1
Installing celluloid 0.16.0
Installing chunky_png 1.3.3
Installing fast-stemmer 1.0.2
Installing classifier-reborn 2.0.2
Installing coffee-script-source 1.8.0
Installing execjs 2.2.2
Installing coffee-script 2.3.0
Installing colorator 0.1
Installing multi_json 1.10.1
Installing sass 3.4.9
Installing compass-core 1.0.1
Installing compass-import-once 1.0.5
Installing rb-fsevent 0.9.4
Installing ffi 1.9.6
Installing rb-inotify 0.9.5
Installing compass 1.0.1
Installing tilt 1.4.1
Installing haml 4.0.6
Installing jekyll-coffeescript 1.0.1
Installing jekyll-gist 1.1.0
Installing jekyll-paginate 1.1.0
Installing jekyll-sass-converter 1.3.0
Installing listen 2.8.4
Installing jekyll-watch 1.2.0
Installing kramdown 1.5.0
Installing liquid 2.6.1
Installing mercenary 0.3.5
Installing posix-spawn 0.3.9
Installing yajl-ruby 1.1.0
Installing pygments.rb 0.6.0
Installing redcarpet 3.2.2
Installing safe_yaml 1.0.4
Installing parslet 1.5.0
Installing toml 0.1.2
Installing jekyll 2.5.3
Installing jekyll-sitemap 0.7.0
Installing octopress-hooks 2.2.3
Installing octopress-date-format 2.0.2
Installing rack 1.6.0
Installing rack-protection 1.5.3
Installing rdiscount 2.1.7.1
Installing rubypants 0.2.0
Installing sass-globbing 1.0.0
Installing sinatra 1.4.5
Installing stringex 1.4.0
Using bundler 1.7.9
Your bundle is complete!
Use `bundle show [gemname]` to see where a bundled gem is installed.
Post-install message from compass:
    Compass is charityware. If you love it, please donate on our behalf at http:
//umdf.org/compass Thanks!
Post-install message from haml:

HEADS UP! Haml 4.0 has many improvements, but also has changes that may break
your application:

* Support for Ruby 1.8.6 dropped
* Support for Rails 2 dropped
* Sass filter now always outputs &lt;style&gt; tags
* Data attributes are now hyphenated, not underscored
* html2haml utility moved to the html2haml gem
* Textile and Maruku filters moved to the haml-contrib gem

For more info see:

http://rubydoc.info/github/haml/haml/file/CHANGELOG.md
</code></pre>

<p>I guess this is because my network security settings, but I do not know. If you are facing the same issue, I hope my solution helped. Or if you know the reason, please tell me by leaving a comment below. Thanks!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/12/22/overload-override-java-main-method/">[Java OOP] Override/overload Java Main Method</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-12-22T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2014/12/22/overload-override-java-main-method/#disqus_thread"
             data-disqus-identifier="http://okckd.github.io/blog/2014/12/22/overload-override-java-main-method/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Can we overload main method in Java?</h3>

<p>Can. But only <strong>public static void main(String[] args)</strong> will be used when <a href="http://stackoverflow.com/questions/3759315/can-we-overload-the-main-method-in-java">your class is launched by the JVM</a>.</p>

<p>You can call other <strong>main() method</strong> yourself from code.</p>

<p>Eg.</p>

<pre><code>class Simple{  
  public static void main(int a){  
  System.out.println(a);  
  }  

  public static void main(String args[]){  
  System.out.println("main() method invoked");  
  main(10);  
  }  
}
</code></pre>

<p>output:</p>

<pre><code>main() method invoked
10
</code></pre>

<h3>Can we override main method in Java?</h3>

<p>No.</p>

<p><a href="http://stackoverflow.com/questions/9083876/override-main-method">MAIN is a class method</a>. Hence, it does not makes sense to &ldquo;override&rdquo; it (or any static method). The concept of &ldquo;overriding&rdquo; is only for instance methods.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/12/22/common-root-java-class/">[Java OOP] Common Root of Java Classes</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-12-22T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2014/12/22/common-root-java-class/#disqus_thread"
             data-disqus-identifier="http://okckd.github.io/blog/2014/12/22/common-root-java-class/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Common Root Class</h3>

<p><strong>java.lang.Object</strong>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html">link</a></p>

<p>All Java classes are derived from this <a href="http://www.ntu.edu.sg/home/ehchua/programming/java/J3b_OOPInheritancePolymorphism.html">common root class</a>, that defines common behaviors.</p>

<p>Common behaviors include multi-threading and garbage collector etc.</p>

<h4>Some methods</h4>

<p><a href="http://docs.oracle.com/javase/tutorial/java/IandI/objectclass.html">ref</a></p>

<p>protected Object clone() throws CloneNotSupportedException</p>

<blockquote><p>Creates and returns a copy of this object.</p></blockquote>

<p>public boolean equals(Object obj)</p>

<blockquote><p>Indicates whether some other object is &ldquo;equal to&rdquo; this one.</p></blockquote>

<p>protected void finalize() throws Throwable</p>

<blockquote><p>Called by the garbage collector on an object when garbage collection determines that there are no more references to the object</p></blockquote>

<p>public final Class getClass()</p>

<blockquote><p>Returns the runtime class of an object.</p></blockquote>

<p>public int hashCode()</p>

<blockquote><p>Returns a hash code value for the object.</p></blockquote>

<p>public String toString()</p>

<blockquote><p>Returns a string representation of the object.</p></blockquote>

<h3>Sync-related methods</h3>

<p>The notify, notifyAll, and wait methods of Object all play a part in synchronizing the activities of independently running threads in a program.</p>

<pre><code>public final void notify()
public final void notifyAll()
public final void wait()
public final void wait(long timeout)
public final void wait(long timeout, int nanos)
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/12/22/can-interface-extend-interface/">[Java OOP] Interface Extend Another Interface</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-12-22T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2014/12/22/can-interface-extend-interface/#disqus_thread"
             data-disqus-identifier="http://okckd.github.io/blog/2014/12/22/can-interface-extend-interface/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Can an interface extend another interface in Java?</h3>

<p>Yes. Just remember that you should implement the methods in <a href="http://www.programmerinterview.com/index.php/java-questions/java-can-an-interface-extend-another-interface/">both interfaces</a>.</p>

<p>Example in Java source code <a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html">link1</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html">link2</a>:</p>

<pre><code>public interface List&lt;E&gt; extends Collection&lt;E&gt; {

}

public interface Collection&lt;E&gt; extends Iterable&lt;E&gt; {

}
</code></pre>

<p>In conclusion, <a href="http://stackoverflow.com/questions/19546357/can-an-interface-extend-multiple-interfaces-in-java">ref</a></p>

<p>An interface can extend multiple interfaces.</p>

<p>A class can implement multiple interfaces.</p>

<p>However, a class can only extend a single class.</p>

<h4>a special case</h4>

<pre><code>interface A
{
    void test();
}

interface B 
{
    void test();
}

class C implements A, B
{
    @Override
    public void test() {

    }
}
</code></pre>

<p>Well, a single implementation works for the both methods. This implementation works no problem.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/3">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/index.html">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section class="well">
  <h1>Categories</h1>
  <ul id="categories" class="nav nav-list">
    <li class='category'><a href='/blog/categories/cc150v4/'>cc150v4 (34)</a></li>
<li class='category'><a href='/blog/categories/cc150v5/'>cc150v5 (28)</a></li>
<li class='category'><a href='/blog/categories/design/'>design (53)</a></li>
<li class='category'><a href='/blog/categories/epic/'>epic (1)</a></li>
<li class='category'><a href='/blog/categories/experience/'>experience (3)</a></li>
<li class='category'><a href='/blog/categories/facebook/'>facebook (9)</a></li>
<li class='category'><a href='/blog/categories/fundamental/'>fundamental (5)</a></li>
<li class='category'><a href='/blog/categories/google/'>google (37)</a></li>
<li class='category'><a href='/blog/categories/java-oop/'>java oop (19)</a></li>
<li class='category'><a href='/blog/categories/leetcode/'>leetcode (153)</a></li>
<li class='category'><a href='/blog/categories/leetcode-plus/'>leetcode_plus (9)</a></li>
<li class='category'><a href='/blog/categories/lintcode/'>lintcode (11)</a></li>
<li class='category'><a href='/blog/categories/ninechap/'>ninechap (15)</a></li>
<li class='category'><a href='/blog/categories/question/'>question (85)</a></li>
<li class='category'><a href='/blog/categories/string-search/'>string search (5)</a></li>
<li class='category'><a href='/blog/categories/testing/'>testing (7)</a></li>
<li class='category'><a href='/blog/categories/top-k/'>top k (7)</a></li>
<li class='category'><a href='/blog/categories/twitter/'>twitter (4)</a></li>

  </ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/01/09/terminology-ngram/">[Terminology] N-gram</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/01/09/most-frequent-word-from-book/">[Question] Most Frequent Word From a Book</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/01/09/match-triplet-with-reverse-order/">[Question] Match Triplet With Reverse Order</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/01/09/longest-common-substring/">[Question] Longest Common Contiguous Intersection (Longest Common Substring)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/01/09/big-data-top-k-frequency-3/">[Design] Big Data - Top K Frequency 3</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Charlie Brown -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'woodstockblog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
