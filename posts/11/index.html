
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Shuatiblog.com</title>
  <meta name="author" content="CodeMonkey">

  
  <meta name="description" content="ref 1: What are benefits of using HTTPS over HTTP? HTTPS means that you tunnel the HTTP protocol over TLS/SSL which encrypts the HTTP payload. So the &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.shuatiblog.com/posts/11/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Shuatiblog.com" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-52495723-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.shuatiblog.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
    <li><a href="/">
        <span class="blue_light">
            Shuatiblog.com
        </span>
       
    </a></li>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About me</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/20/difference-http-https/">[Design] Difference Between HTTP and HTTPS</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-01-20T00:00:00+08:00" pubdate data-updated="true"></time>
        
         | <a href="/blog/2015/01/20/difference-http-https/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://stackoverflow.com/a/8375247">ref</a></p>

<h4>1: What are benefits of using HTTPS over HTTP?</h4>

<p>HTTPS means that you <strong>tunnel the HTTP protocol over TLS/SSL</strong> which encrypts the HTTP payload.</p>

<p>So the benefit is that HTTP requests and responses are transmitted securely over the wire, e.g. your Internet Service Provider does not know what you&rsquo;re doing.</p>

<p><a href="http://stackoverflow.com/a/548042">When Google switched Gmail to use HTTPS</a>, no additional resources were required; no network hardware, no new hosts. It only increased CPU load by about 1%.</p>

<h4>2: How to use HTTPS?</h4>

<p>Enable it at your endpoint, in general <strong>a web server in front of your application server</strong>. Most web servers (e.g. IIS, Apache) support this by configuration. Depending on your confidentiality requirements this may not be enough.</p>

<h4>3: Can we use HTTPS for only login purpose and then onwords HTTP?</h4>

<p>Technically this is possible, but it introduces some security risks. Example: After a secured login you transmit session IDs identifying the user. If you transmit those session IDs unsecurely (no SSL), session hijacking becomes a risk (&lsquo;man-in-the-middle&rsquo;)</p>

<h4>4: What settings needs to be done for making website HTTPS?</h4>

<p>See #2. In public internet scenarios you should request (buy) a certificate from a certain Certificate Authority (CA), so that end user clients can verify whether they should trust your certificate.</p>

<h4>5: Is there any threat present in HTTPS?</h4>

<p>In the protocol itself there is a slight risk of <strong>man-in-the-middle attacks</strong>. E.g. a proxy between the client and server could pretend to be the server itself (this requires a successful attack to network infrastructure, e.g. DNS). There are several other &lsquo;more obscure&rsquo; risks that do not relate to the protocol itself, e.g.:</p>

<ol>
<li>usage of an outdated encryption key length (e.g. 256 bit)</li>
<li>loss of private keys or unappropriate key management procedures (e.g. send via unencrypted email)</li>
<li>certificate authority failure</li>
</ol>


<h4>6: Is processing time required for HTTPS is greater than HTTP?</h4>

<p>Yes, key negotiation (handshaking) <strong>requires a lot CPU capacity</strong>.</p>

<p><img class="middle" src="/assets/images/http-vs-https.png"></p>

<h3>Port Number</h3>

<p>HTTP uses <strong>port 80 or 8080</strong>, while HTTPS uses <strong>TCP port 443</strong>.</p>

<p><a href="http://www.coderanch.com/t/168608/java-Web-Component-SCWCD/certification/Diff">The reason</a> that some applications use 8080 (7080, 9080) instead of 80 is that on UNIX, <strong>port numbers below 1024</strong> are reserved for <strong>super-user</strong> processes.</p>

<p>That&rsquo;s why for OS compatibility reasons, some servers use other ports (greater than 1024). But they still have &ldquo;80&rdquo; inside the numner, eg. 7080, 8080, 9080.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/20/basin-size-in-matrix/">[Palantir] Largest Basin Size in Matrix</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-01-20T00:00:00+08:00" pubdate data-updated="true"></time>
        
         | <a href="/blog/2015/01/20/basin-size-in-matrix/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Question</h3>

<p><a href="http://www.careercup.com/question?id=15380670">link</a></p>

<p>A group of farmers has some elevation data, and we’re going to help them understand how rainfall flows over their farmland.</p>

<p>We’ll represent the land as a two-dimensional array of altitudes and use the following model, based on the idea that water flows downhill:</p>

<p>If a cell’s neighboring cells all have higher altitudes, we call this cell a sink; water collects in sinks. Two cells are neighbors if the rows and columns each differ by at most one. Hence an interior cell will have eight neighbors, a cell on the edge will have five neighbors, and a cell in a corner will have three neighbors.</p>

<p>Otherwise, water will flow to the neighboring cell with the lowest altitude. If a cell is not a sink, you may assume it has a unique lowest neighbor and that this neighbor will be lower than the cell.
Cells that drain into the same sink – directly or indirectly – are said to be part of the same basin.</p>

<p>Your challenge is to partition the map into basins. In particular, given a map of elevations, your code should partition the map into basins and output the sizes of the basins, in descending order.</p>

<p>Assume the elevation maps are square. Input will begin with a line with one integer, S, the height (and width) of the map. The next S lines will each contain a row of the map, each with S integers – the elevations of the S cells in the row.  Some farmers have small land plots such as the examples below, while some have larger plots.  However, in no case will the total size of the farmland exceed 1000x1000.</p>

<p>Note: The input uses unix line endings (\n). If you try to view the sample inputs on a windows machine with a program that does not convert line endings (like Notepad), you will see the input appear all on a single line.</p>

<p>Your code should output a space-separated list of the basin sizes, in descending order. (Trailing spaces are ignored.)</p>

<p>While correctness and performance are the most important parts of this problem, a human will be reading your solution, so please make an effort to submit clean, readable code. In particular, do not write code as if you were solving a problem for a competition.</p>

<p>A few examples are below.</p>

<p>Input:</p>

<pre><code>       3
       1 5 2
       2 4 7
       3 6 9
</code></pre>

<p>Output:</p>

<pre><code>            7 2
</code></pre>

<p>The basins, labeled with A’s and B’s, are:</p>

<pre><code>       A A B
       A A B
       A A A
</code></pre>

<p>Input:</p>

<pre><code>       1
       10
</code></pre>

<p>Output:</p>

<pre><code>       1
</code></pre>

<p>There is only one basin in this case.</p>

<p>Input:</p>

<pre><code>       5
       1 0 2 5 8
       2 3 4 7 9
       3 5 7 9 9
       1 2 5 5 3
       3 3 5 1 0
</code></pre>

<p>Output:</p>

<pre><code>       10 8 7
</code></pre>

<p>The basins, labeled with A’s, B’s, and C’s, are:</p>

<pre><code>       A A A A A
       A A A A A
       B B B C C
       B B C C C
       B B C C C
</code></pre>

<p>Input:</p>

<pre><code>       4
       0 3 2 3
       3 2 1 4
       3 4 3 3
       5 5 2 0
</code></pre>

<p>Output:</p>

<pre><code>       6 5 5
</code></pre>

<p>The basins, labeled with A’s, B’s, and C’s, are:</p>

<pre><code>       A A B B
       A A B B
       A B C C
       A C C C
</code></pre>

<h3>Solution</h3>

<p>I did not find a &lsquo;best&rsquo; solution online, but there&rsquo;s a good enough explanation available <a href="http://stackoverflow.com/questions/24336686/find-the-largest-basin-size-in-a-given-matrix">here</a>:</p>

<ol>
<li><p>First store index according to their heights.</p></li>
<li><p>Then iterate from smallest height to largest height.</p></li>
<li><p>If current index is not visited, make it Basin surface (where water can collect), and make all higher neighbours as Non-Basin surface.</p></li>
<li><p>Repeat step 3 till all indexes are visited.</p></li>
<li><p>DFS find each basin</p></li>
</ol>


<h3>Code</h3>

<p>I post my solution written in 2013.</p>

<pre><code>public class MeSolution2013 {

    public static void main(String args[]) {

        String inputFile;
        int testCaseNumber = 1;

        while (true) {
            inputFile = "input" + testCaseNumber + ".txt";
            BufferedReader in;
            try {
                URI uri = MeSolution2013.class.getResource(inputFile).toURI();
                in = new BufferedReader(new FileReader(new File(uri)));
            } catch (Exception e) {
                // there is not more test cases
                break;
            }

            Scanner sc = new Scanner(in);
            int length = sc.nextInt();
            int[][] elevation = new int[length][length];
            for (int i = 0; i &lt; length; i++) {
                for (int j = 0; j &lt; length; j++) {
                    elevation[i][j] = sc.nextInt();
                }
            }

            List&lt;Pair&gt; sinkList = new ArrayList&lt;Pair&gt;();

            // first find out all sink nodes
            for (int i = 0; i &lt; length; i++) {
                for (int j = 0; j &lt; length; j++) {
                    if (elevation[i][j] &lt; lowestNeighbor(i, j, elevation)) {
                        // (i,j) is a sink point
                        sinkList.add(new Pair(i, j));
                    }
                }
            }

            // then for each sink node, return the count
            int[] basinSize = new int[sinkList.size()];
            for (int i = 0; i &lt; sinkList.size(); i++) {
                basinSize[i] = count(sinkList.get(i).X, sinkList.get(i).Y,
                        elevation);
            }
            Arrays.sort(basinSize);

            for (int i = sinkList.size() - 1; i &gt;= 0; i--) {
                System.out.print(basinSize[i]);
                if (i != 0)
                    System.out.print(" ");
            }
            System.out.println();
            testCaseNumber++;
        }
    }

    static int count(int x, int y, int[][] ele) {

        int num = 1;

        // if the neighbour is higher than current, add count to current count
        // if all neighbours are lower than current, return 1

        // diagonal neighbors
        if (withinBound(x - 1, y, ele) &amp;&amp; rainFlowFrom(x, y, x - 1, y, ele)) { // upper
                                                                                // elment
            num += count(x - 1, y, ele);
        }
        if (withinBound(x + 1, y, ele) &amp;&amp; rainFlowFrom(x, y, x + 1, y, ele)) { // lower
                                                                                // element
            num += count(x + 1, y, ele);
        }
        if (withinBound(x, y - 1, ele) &amp;&amp; rainFlowFrom(x, y, x, y - 1, ele)) { // left
                                                                                // hand
                                                                                // side
            num += count(x, y - 1, ele);
        }
        if (withinBound(x, y + 1, ele) &amp;&amp; rainFlowFrom(x, y, x, y + 1, ele)) { // right
                                                                                // hand
                                                                                // side
            num += count(x, y + 1, ele);
        }

        // diagonal neighbors
        if (withinBound(x - 1, y - 1, ele)
                &amp;&amp; rainFlowFrom(x, y, x - 1, y - 1, ele)) { // upper elment
            num += count(x - 1, y - 1, ele);
        }
        if (withinBound(x + 1, y + 1, ele)
                &amp;&amp; rainFlowFrom(x, y, x + 1, y + 1, ele)) { // lower element
            num += count(x + 1, y + 1, ele);
        }
        if (withinBound(x + 1, y - 1, ele)
                &amp;&amp; rainFlowFrom(x, y, x + 1, y - 1, ele)) { // left hand side
            num += count(x + 1, y - 1, ele);
        }
        if (withinBound(x - 1, y + 1, ele)
                &amp;&amp; rainFlowFrom(x, y, x - 1, y + 1, ele)) { // right hand side
            num += count(x - 1, y + 1, ele);
        }

        return num;
    }

    static Boolean withinBound(int x, int y, int[][] ele) {
        int bound = ele.length;
        return (x &gt;= 0 &amp;&amp; x &lt; bound &amp;&amp; y &gt;= 0 &amp;&amp; y &lt; bound);
    }

    static Boolean rainFlowFrom(int a, int b, int c, int d, int[][] ele) {
        // rain in (c,d) flows into (a,b).
        if (ele[a][b] &gt;= ele[c][d])
            // if (a,b) is higher than (c,d), impossible to flow this way
            return false;

        int lowest = lowestNeighbor(c, d, ele);

        return (ele[a][b] == lowest);
        // the question states "you may assume it has a unique lowest neighbor"
        // so if flow to (a,b), then that is the unique lowest height.
    }

    static int lowestNeighbor(int a, int b, int[][] ele) {
        int height = 9999999;

        // adjacent neighbor
        if (withinBound(a - 1, b, ele) &amp;&amp; ele[a - 1][b] &lt; height) {
            height = ele[a - 1][b];
        }
        if (withinBound(a + 1, b, ele) &amp;&amp; ele[a + 1][b] &lt; height) {
            height = ele[a + 1][b];
        }
        if (withinBound(a, b - 1, ele) &amp;&amp; ele[a][b - 1] &lt; height) {
            height = ele[a][b - 1];
        }
        if (withinBound(a, b + 1, ele) &amp;&amp; ele[a][b + 1] &lt; height) {
            height = ele[a][b + 1];
        }

        // diagonal neighbor
        if (withinBound(a - 1, b - 1, ele) &amp;&amp; ele[a - 1][b - 1] &lt; height) {
            height = ele[a - 1][b - 1];
        }
        if (withinBound(a + 1, b - 1, ele) &amp;&amp; ele[a + 1][b - 1] &lt; height) {
            height = ele[a + 1][b - 1];
        }
        if (withinBound(a - 1, b + 1, ele) &amp;&amp; ele[a - 1][b + 1] &lt; height) {
            height = ele[a - 1][b + 1];
        }
        if (withinBound(a + 1, b + 1, ele) &amp;&amp; ele[a + 1][b + 1] &lt; height) {
            height = ele[a + 1][b + 1];
        }
        return height;
    }
}

class Pair {

    public int X;
    public int Y;

    public Pair(int _x, int _y) {
        X = _x;
        Y = _y;
    }
}
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/19/difference-http-tcp/">[Design] Difference Between HTTP Protocol and TCP Protocol</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-01-19T00:00:00+08:00" pubdate data-updated="true"></time>
        
         | <a href="/blog/2015/01/19/difference-http-tcp/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://www.quora.com/What-is-the-difference-between-HTTP-protocol-and-TCP-protocol">ref</a></p>

<h3>Short Version</h3>

<p>TCP is a <strong>transport-layer</strong> protocol, and HTTP is an <strong>application-layer</strong> protocol that runs over TCP.</p>

<h3>The layers</h3>

<p>At the very bottom of the network stack is the <strong>physical layer</strong>. This is where electrical signals or light pulses or radio waves actually transmit information from place to place. The physical layer doesn&rsquo;t really have protocols, but instead has standards for voltages, frequencies, and other physical properties. You can transmit information directly this way, but you need a lot of power or a dedicated line, and without higher layers you won&rsquo;t be able to share bandwidth.</p>

<p>The next layer up is the <strong>link layer</strong>. This layer covers communication with devices that share a physical communications medium. Here, protocols like Ethernet, 802.11a/b/g/n, and Token Ring specify how to handle multiple concurrent accesses to the physical medium and how to direct traffic to one device instead of another. In a typical home network, this is how your computer talks to your home &ldquo;router.&rdquo;</p>

<p>The third layer is the <strong>network layer</strong>. In the majority of cases, this is dominated by Internet Protocol (IP). This is where the magic of the Internet happens, and you get to talk to a computer halfway around the world, without needing to know where it is. Routers handle directing your traffic from your local network to the network where the other computer lives, where its own link layer handles getting the packets to the right computer.</p>

<p>Now we are getting somewhere. We can talk to a computer somewhere around the world, but that computer is running lots of different programs. How should it know which one to deliver your message to? The <strong>transport layer</strong> takes care of this, usually with <strong>port numbers</strong>. The two most popular transport layer protocols are TCP and UDP. TCP does a lot of interesting things to smooth over the rough spots of network-layer packet-switched communication like reordering packets, retransmitting lost packets, etc. UDP is more unreliable, but has less overhead.</p>

<p>So we&rsquo;ve connected your browser to the web server software on the other end, but how does the server know what page you want? How can you post a question or an answer? These are things that <strong>application-layer</strong> protocols handle. For <strong>web traffic</strong>, this is the HyperText Transfer Protocol (HTTP). There are thousands of application-layer protocols: SMTP, IMAP, and POP3 for email; XMPP, IRC, ICQ for chat; Telnet, SSH, RDP for remote administration; etc.</p>

<p>Ref: <a href="http://qr.ae/3pnJK">http://qr.ae/3pnJK</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/19/check-if-point-inside-polygon/">[Question] Check if Given Point Inside Polygon</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-01-19T00:00:00+08:00" pubdate data-updated="true"></time>
        
         | <a href="/blog/2015/01/19/check-if-point-inside-polygon/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Question</h3>

<p><a href="http://www.geeksforgeeks.org/how-to-check-if-a-given-point-lies-inside-a-polygon/">link</a></p>

<blockquote><p>Given a polygon and a point ‘p’, find if ‘p’ lies inside the polygon or not. The points lying on the border are considered inside.</p></blockquote>

<p><img class="middle" src="/assets/images/point-in-polygon.png"></p>

<h3>Solution</h3>

<p>Prerequisite reading: <strong>[Question] Check if two line segments intersect</strong>.</p>

<p>Suggested by G4G, this is a simple idea to check:</p>

<p><img class="middle" src="/assets/images/polygon31-300x169.png"></p>

<ol>
<li><p>Draw a horizontal line to the right of each point and extend it to infinity</p></li>
<li><p>Count the number of times the line intersects with polygon edges.</p></li>
<li><p>A point is inside the polygon if either count of intersections is odd or point lies on an edge of polygon.</p></li>
<li><p>Note the special case of point &lsquo;g&rsquo;.</p></li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/19/check-if-line-segment-intersect/">[Question] Check if Two Line Segments Intersect</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-01-19T00:00:00+08:00" pubdate data-updated="true"></time>
        
         | <a href="/blog/2015/01/19/check-if-line-segment-intersect/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Question</h3>

<p><a href="http://www.geeksforgeeks.org/check-if-two-given-line-segments-intersect/">link</a></p>

<blockquote><p>Given two line segments (p1, q1) and (p2, q2), check if 2 line segments intersect.</p></blockquote>

<h3>Orientation</h3>

<p>Considering 3 pointer, orientation can be:</p>

<ol>
<li>counterclockwise</li>
<li>clockwise</li>
<li>colinear (not considering direction)</li>
</ol>


<p><img class="middle" src="/assets/images/line-orientation.png"></p>

<p>Note that orientation only tells the order and sequence relationship of 3 points. <strong>It tells nothing about intersection</strong>.</p>

<h3>Intersection</h3>

<p>Considering 2 line segments: (p1,q1) and (p2,q2).</p>

<h4>Case 1: general</h4>

<p>Two line segment intersect if <strong>BOTH</strong> the 2 conditions hold:</p>

<ol>
<li>(p1, q1, p2) and (p1, q1, q2) have different orientations and</li>
<li>(p2, q2, p1) and (p2, q2, q1) have different orientations</li>
</ol>


<p><img class="middle" src="/assets/images/GeneralCaseExamples1.png"></p>

<p><img class="middle" src="/assets/images/examplesGeneralCase211.png"></p>

<h4>Case 2: special</h4>

<p>The speical case is: <strong>what if all 4 pointers (p1, q1, p2, q2) are all on the same line</strong>!!! Well, this definitely can happen.</p>

<p>If so, check if the values of x-axis and y-axis intersect. I.e. the below 2 cases:</p>

<p><img class="middle" src="/assets/images/examplesSpecialCase1.png"></p>

<h3>Code</h3>

<p>Translated from G4G:</p>

<pre><code>public boolean intersect(Pair p1, Pair q1, Pair p2, Pair q2) {

    int o1 = orientation(p1, q1, p2);
    int o2 = orientation(p1, q1, q2);
    int o3 = orientation(p2, q2, p1);
    int o4 = orientation(p2, q2, q1);

    // General case
    if (o1 != o2 &amp;&amp; o3 != o4) {
        // 2 lines intersect
        return true;
    }

    // Special Cases
    Segment seg1 = new Segment(p1, q1);
    Segment seg2 = new Segment(p2, q2);

    // p1, q1 and p2 are colinear and p2 lies on segment p1q1
    if (o1 == 0 &amp;&amp; onSegment(seg1, p2))
        return true;

    // p1, q1 and p2 are colinear and q2 lies on segment p1q1
    if (o2 == 0 &amp;&amp; onSegment(seg1, q2))
        return true;

    // p2, q2 and p1 are colinear and p1 lies on segment p2q2
    if (o3 == 0 &amp;&amp; onSegment(seg2, p1))
        return true;

    // p2, q2 and q1 are colinear and q1 lies on segment p2q2
    if (o4 == 0 &amp;&amp; onSegment(seg2, q1))
        return true;

    return false; // Doesn't fall in any of the above cases
}

private boolean onSegment(Segment seg, Pair q) {
    // check if q lies on line segment seg(p1, p2)
    if (q.x &lt;= Math.max(seg.p1.x, seg.p2.x)
            &amp;&amp; q.x &gt;= Math.min(seg.p1.x, seg.p2.x)
            &amp;&amp; q.y &lt;= Math.max(seg.p1.y, seg.p2.y)
            &amp;&amp; q.y &gt;= Math.min(seg.p1.y, seg.p2.y))
        return true;

    return false;
}

private int orientation(Pair first, Pair second, Pair third) {
    int val = (second.y - first.y) * (third.x - second.x)
            - (second.x - first.x) * (third.y - second.y);
    if (val == 0) {
        // colinear
        return 0;
    } else {
        // clock or counterclock wise (1 or -1)
        return val / Math.abs(val);
    }
}

class Segment {
    Pair p1;
    Pair p2;

    public Segment(Pair p1, Pair p2) {
        this.p1 = p1;
        this.p2 = p2;
    }
}
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/18/max-squre-with-all-1/">[Question] Maximum Square Sub-matrix With All 1s</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-01-18T00:00:00+08:00" pubdate data-updated="true"></time>
        
         | <a href="/blog/2015/01/18/max-squre-with-all-1/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Question</h3>

<p><a href="http://www.geeksforgeeks.org/maximum-size-sub-matrix-with-all-1s-in-a-binary-matrix/">link</a></p>

<blockquote><p>Given a binary matrix, find out the maximum size square sub-matrix with all 1s. For example, consider the below binary matrix.</p></blockquote>

<pre><code>   0  1  1  0  1 
   1  1  0  1  0 
   0  1  1  1  0
   1  1  1  1  0
   1  1  1  1  1
   0  0  0  0  0
</code></pre>

<blockquote><p>The maximum square sub-matrix with all set bits is size 9. Note we only find <strong>square</strong>, not rectangles! (this makes it much easier)</p></blockquote>

<h3>Solution</h3>

<p>Since <strong>square only</strong>, we can use DP. <a href="http://www.geeksforgeeks.org/maximum-size-sub-matrix-with-all-1s-in-a-binary-matrix/">Quoted answer</a> below:</p>

<blockquote><p>Let the given binary matrix be M[R][C]. The idea of the algorithm is to construct an auxiliary size matrix S[][] in which each entry S[i][j] represents size of the square sub-matrix with all 1s including M[i][j] where M[i][j] is the rightmost and bottommost entry in sub-matrix.</p>

<ol>
<li><p>Construct a sum matrix S[R][C] for the given M[R][C].</p></li>
<li><p> Copy first row and first columns as it is from M[][] to S[][]</p></li>
<li><p> For other entries, use following expressions to construct S[][]</p></li>
</ol>
</blockquote>

<pre><code>         If M[i][j] is 1 then
            S[i][j] = min(S[i][j-1], S[i-1][j], S[i-1][j-1]) + 1
         Else /*If M[i][j] is 0*/
            S[i][j] = 0
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/18/lexicographic-order-from-dict/">[Google] Lexicographic Order (Letter Replacement) of Dictionary</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-01-18T00:00:00+08:00" pubdate data-updated="true"></time>
        
         | <a href="/blog/2015/01/18/lexicographic-order-from-dict/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Question</h3>

<p><a href="http://www.careercup.com/question?id=13394663">link</a></p>

<blockquote><p>Given set of words that are lexicographically sorted, return lexicographic order. E.g:</p></blockquote>

<pre><code>abc
acd
bcc
bed
bdc
dab
</code></pre>

<blockquote><p>The order of letters for the given example would be</p></blockquote>

<pre><code>a-&gt;b-&gt;c-&gt;e-&gt;d
</code></pre>

<h3>Solution</h3>

<blockquote><p>Just form a graph(DAG) and do a topological sort.</p></blockquote>

<p>Start from the first pair in the dictionary. Compare two strings in this pair <strong>till first mismatch</strong>.</p>

<p>Eg: <strong>aad &amp; aab</strong>, in this case create an edge <strong>d &ndash;> b</strong>.</p>

<p>More details is available <a href="http://codereview.stackexchange.com/questions/48292/return-the-lexicographic-order">here</a>.</p>

<h4>Variant, and a different solution</h4>

<p>Another way of asking this question, is:</p>

<blockquote><p>有一个字典因为某种原因每个字符都被替换成一个别的字符了（但还是一一对应)，
但是单词的顺序没有改变，比如</p></blockquote>

<pre><code>cat
coffee
common

--&gt; 

dkc
dbhhzz
dbllbq
</code></pre>

<blockquote><p>让找出的这个替换的规则（guaranteed to have a unique one)</p></blockquote>

<p><strong>Alternative solution</strong> is to check according to frequencies.</p>

<h3>Code</h3>

<pre><code>public String lexicoOrder(String[] dict) {
    String ans = "";

    // for each pair, maintain 2 HashMap
    HashMap&lt;Character, Integer&gt; incount = new HashMap&lt;Character, Integer&gt;();
    HashMap&lt;Character, List&lt;Character&gt;&gt; connection = new HashMap&lt;Character, List&lt;Character&gt;&gt;();
    for (String str : dict) {
        for (char c : str.toCharArray()) {
            incount.put(c, 0);
            connection.put(c, new ArrayList&lt;Character&gt;());
        }
    }
    buildGraph(dict, incount, connection);

    // start topology sorting
    Queue&lt;Character&gt; temp = new LinkedList&lt;Character&gt;();
    for (char c : incount.keySet()) {
        if (incount.get(c) == 0) {
            temp.offer(c);
            incount.remove(c);
            // remove any node whose incount is 0
        }
    }
    while (!temp.isEmpty()) {
        char top = temp.poll();
        ans += top;
        // 'top' is next char in line. remove it and delete connections
        List&lt;Character&gt; inNodes = connection.get(top);
        for (char c : inNodes) {
            // remove incount for all nodes from inNodes
            incount.put(c, incount.get(c) - 1);
            if (incount.get(c) == 0) {
                incount.remove(c);
                temp.offer(c);
            }
        }
    }
    if (incount.size() == 0)
        return ans;
    else
        return "unable to find a valid char sequence.";
}

public void buildGraph(String[] dict, HashMap&lt;Character, Integer&gt; incount,
        HashMap&lt;Character, List&lt;Character&gt;&gt; connection) {
    // build the graph map
    // abc
    // acd
    // bcc
    // bed
    // bdc
    // dab
    for (int i = 0; i &lt; dict.length - 1; i++) {
        // compare dict[i] and dict[i+1]
        String str1 = dict[i];
        String str2 = dict[i + 1];
        int p = 0;
        while (p &lt; str1.length() &amp;&amp; p &lt; str2.length()) {
            if (str1.charAt(p) == str2.charAt(p)) {
                p++;
            } else {
                break;
            }
        }
        if (p == str1.length()) {
            // this is special case eg. "ab" &amp; "abc"
            // this will not give up any information about lexico order
            continue;
        }
        char from = str1.charAt(p);
        char to = str2.charAt(p);
        // update incount
        incount.put(to, incount.get(to) + 1);
        // update connection
        connection.get(from).add(to);
    }
}
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/18/Lexicographic-rank-of-string/">[Amazon] Lexicographic Rank of a String</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-01-18T00:00:00+08:00" pubdate data-updated="true"></time>
        
         | <a href="/blog/2015/01/18/Lexicographic-rank-of-string/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Question</h3>

<p><a href="http://www.geeksforgeeks.org/lexicographic-rank-of-a-string/">link</a></p>

<blockquote><p>Given a string, find its rank among all its permutations sorted lexicographically.</p>

<p>For example, rank of “abc” is 1, rank of “acb” is 2, and rank of “cba” is 6.</p></blockquote>

<h3>Solution</h3>

<p>Let the given string be “<strong>STRG</strong>”. In the input string, ‘S’ is the first character. There are total 4 characters and <strong>2 of them are smaller than ‘S’</strong>. So there can be <strong>2 * 3!</strong> smaller strings where first character is smaller than ‘S’, like following:</p>

<pre><code>G X X X
R X X X
</code></pre>

<p>Repeat the same process for T, and we get:</p>

<pre><code>Rank = 2*3! + 2*2! + 1*1! + 0*0! = 17
</code></pre>

<h3>Code</h3>

<pre><code>public int getRank(String input) {
    if (input == null || input.length() == 0) {
        return 0;
    }
    input = input.toUpperCase();
    return helper(input) + 1;
}

public int helper(String input) {
    if (input == null || input.length() == 0) {
        return 0;
    }
    char headChar = input.charAt(0);
    int countSmallerThanHead = 0;
    for (char ch : input.toCharArray()) {
        if (ch &lt; headChar) {
            countSmallerThanHead++;
        }
    }
    return countSmallerThanHead * Common.factorial(input.length() - 1)
            + helper(input.substring(1));
}
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/17/find-nodes-distance-k-binary-tree/">[Amazon] Find Nodes of Distance K From Binary Tree</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-01-17T00:00:00+08:00" pubdate data-updated="true"></time>
        
         | <a href="/blog/2015/01/17/find-nodes-distance-k-binary-tree/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Question</h3>

<p><a href="http://www.careercup.com/question?id=15069740">link</a></p>

<blockquote><p>Find the nodes at d distance from a certain node in a Binary Tree</p></blockquote>

<h3>Solution</h3>

<p><a href="http://www.geeksforgeeks.org/print-nodes-distance-k-given-node-binary-tree/">There are two types</a> of nodes to be considered:</p>

<ol>
<li>Nodes in the subtree rooted of the target node.</li>
<li>Other nodes, may be an ancestor of target, or a node in some other subtree.</li>
</ol>


<p>The details of find these nodes:</p>

<ol>
<li><p>Find the nodes which can be reached in k hops from the given node.</p></li>
<li><p>Second part we look at those nodes <strong>on the upper part of the tree</strong>. The parent of the given node is 1 hop away. Hence in the <strong>other child subtree</strong> of the parent, we find nodes with k-1 hops.</p>

<p> Similarly the grand parent of B, we find nodes with k &ndash; 2 distance.</p></li>
</ol>


<p>Implementation:</p>

<ol>
<li><p>Start from root, <strong>store all nodes in a queue</strong> of maximum size k till you reach the given node.</p></li>
<li><p>Call FindNodesAtDistance() on the nodes from the queue to get all the nodes <strong>distance k -i</strong> from the node.</p></li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/12/java-blocking-queue-2/">[Java OOP] Java BlockingQueue (2)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-01-12T00:00:00+08:00" pubdate data-updated="true"></time>
        
         | <a href="/blog/2015/01/12/java-blocking-queue-2/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Blocking Queue Implementation</h3>

<p><img class="middle" src="/assets/images/blocking-queue.png"></p>

<p><a href="http://tutorials.jenkov.com/java-concurrency/blocking-queues.html">source</a></p>

<ol>
<li><p>A blocking queue is a queue, so we init a queue with a pre-defined size.</p></li>
<li><p>BlockingQueue Class comes with Java 5, in java.util.concurrent.BlockingQueue. This example is only used to help you understand what&rsquo;s happening behind the scene.</p></li>
<li><p>Both <strong>enqueue(Object o){}</strong> and <strong>dequeue(){}</strong> are <strong>synchronized</strong> method.</p></li>
<li><p>Both methods do <strong>while { wait(); }</strong> and then <strong>notifyAll()</strong>.</p></li>
</ol>


<h3>Code</h3>

<pre><code>public class MyBlockingQueue {

    private List&lt;Object&gt; queue = new LinkedList&lt;Object&gt;();
    private int size = 10;

    public MyBlockingQueue(int size) {
        this.size = size;
    }

    public synchronized void enqueue(Object item) throws InterruptedException {
        while (this.queue.size() == this.size) {
            wait();
        }
        if (this.queue.size() == 0) {
            notifyAll();
        }
        this.queue.add(item);
    }

    public synchronized Object dequeue() throws InterruptedException {
        while (this.queue.size() == 0) {
            wait();
        }
        if (this.queue.size() == this.size) {
            notifyAll();
        }

        return this.queue.remove(0);
    }

    public boolean isEmpty() {
        return this.queue.isEmpty();
    }
}
</code></pre>

<h3>Another example</h3>

<p>This BlockingQueue example makes use MyBlockingQueue that we defined above.</p>

<pre><code>public class Main {

    public static void main(String[] args) throws Exception {

        MyBlockingQueue queue = new MyBlockingQueue(1024);

        Producer producer = new Producer(queue);
        Consumer consumer = new Consumer(queue);

        new Thread(producer).start();
        new Thread(consumer).start();

        Thread.sleep(4000);
    }
}
</code></pre>

<p>Producer</p>

<pre><code>public class Producer implements Runnable {

    protected MyBlockingQueue queue = null;

    public Producer(MyBlockingQueue queue) {
        this.queue = queue;
    }

    public void run() {
        System.out.println("Producer starting... ");
        try {
            for (int i = 1; i &lt;= 5; i++) {
                queue.enqueue("" + i);
                Thread.sleep(500);
            }
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }
}
</code></pre>

<p>Consumer</p>

<pre><code>public class Consumer implements Runnable {

    protected MyBlockingQueue queue = null;

    public Consumer(MyBlockingQueue queue) {
        this.queue = queue;
    }

    public void run() {
        try {
            for (int i = 1; i &lt;= 5; i++) {
                System.out.println(queue.dequeue());
            }
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        System.out.println("Consumer finished. ");
    }
}
</code></pre>

<p>Output:</p>

<pre><code>Producer starting... 
1
2
3
4
5
Consumer finished. 
</code></pre>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="12">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="10">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section class="well">
  <h1>Categories</h1>
  <ul id="categories" class="nav nav-list">
    <li class='category'><a href='/blog/categories/cc150v4/'>cc150v4 (34)</a></li>
<li class='category'><a href='/blog/categories/cc150v5/'>cc150v5 (28)</a></li>
<li class='category'><a href='/blog/categories/design/'>design (75)</a></li>
<li class='category'><a href='/blog/categories/experience/'>experience (4)</a></li>
<li class='category'><a href='/blog/categories/fundamental/'>fundamental (11)</a></li>
<li class='category'><a href='/blog/categories/java-oop/'>java oop (29)</a></li>
<li class='category'><a href='/blog/categories/leetcode/'>leetcode (176)</a></li>
<li class='category'><a href='/blog/categories/leetcode-plus/'>leetcode_plus (9)</a></li>
<li class='category'><a href='/blog/categories/lintcode/'>lintcode (11)</a></li>
<li class='category'><a href='/blog/categories/ninechap/'>ninechap (16)</a></li>
<li class='category'><a href='/blog/categories/q-facebook/'>q-facebook (9)</a></li>
<li class='category'><a href='/blog/categories/q-google/'>q-google (62)</a></li>
<li class='category'><a href='/blog/categories/question/'>question (124)</a></li>
<li class='category'><a href='/blog/categories/string-search/'>string search (17)</a></li>
<li class='category'><a href='/blog/categories/testing/'>testing (7)</a></li>
<li class='category'><a href='/blog/categories/top-k/'>top k (7)</a></li>

  </ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/08/23/how-is-pipe-implemented-unix/">[Design] How is Pipe implemented in Unix/Linux </a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/06/09/Cryptographic-standards-AES-RSA/">[Design] Cryptographic standard, AES and RSA </a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/06/08/linux-and-tcp-ports/">[Design] Linux and TCP ports </a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/24/overload-override-compile-runtime/">[Java OOP] Overload, Override, Compile, Runtime (Static/Dynamic Polymph) </a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/05/21/sort-letters-given-lexicographic-order/">[Palantir] Sort Letters Given Lexicographic Order </a>
      </li>
    
  </ul>
</section>




<!--
<script type="text/javascript" src="http://srvpub.com/adServe/banners?tid=29011_41781_0&size=120x600" ></script>
&#8211;>
  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
    Copyright &copy; 2015 - <a href="/about">CodeMonkey</a> -  All posts are my original writing, based uppon my personal view. <a href="/policy">Privacy Policy</a> - 
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'woodstockblog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
