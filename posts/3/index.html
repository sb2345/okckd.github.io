
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Shuatiblog.com</title>
  <meta name="author" content="CodeMonkey">

  
  <meta name="description" content="Objects Much of the power and flexibility of modern software analysis and design derives from its use of objects. Classes Classes create an abstract &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.shuatiblog.com/posts/3/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Shuatiblog.com" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-52495723-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.shuatiblog.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
    <li><a href="/">
        <span class="blue_light">
            Shuatiblog.com
        </span>
       
    </a></li>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About me</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/08/24/three-property-object/">[Java OOP] Three Properties of Class/Object</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-08-24T00:00:00-05:00" pubdate data-updated="true"></time>
        
         | <a href="/blog/2015/08/24/three-property-object/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Objects</h1>

<p>Much of the power and flexibility of modern software analysis and design derives from its use of objects.</p>

<h1>Classes</h1>

<p>Classes create an abstract representation of the world, letting you discard unnecessary details.</p>

<h1>The 3 properties</h1>

<h2>Class</h2>

<ol>
<li><p>properties</p></li>
<li><p><strong>behavior</strong></p></li>
<li><p>relationships to other objects</p></li>
</ol>


<h2>Object</h2>

<ol>
<li><p>state</p></li>
<li><p><strong>behavior</strong></p></li>
<li><p>identity</p></li>
</ol>


<p>Ref: <a href="http://javadevwannabe.blogspot.sg/2012/02/state-behavior-and-identity.html?m=1">http://javadevwannabe.blogspot.sg/2012/02/state-behavior-and-identity.html?m=1</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/08/23/design-class1-3/">[NineChap System Design] Class 1.3: Improvement</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-08-23T00:00:00-05:00" pubdate data-updated="true"></time>
        
         | <a href="/blog/2015/08/23/design-class1-3/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>From Level 0 to Level 1</h1>

<p>Refer to the previous question. How can we improve???</p>

<ol>
<li>performance</li>
<li>scalability</li>
<li>robustness</li>
</ol>


<h2>performance</h2>

<p>A better algo: Inverted Index</p>

<p><img class="middle" src="/assets/images/design-class1-reco-2.png"></p>

<p>Avg performance increase to ~ 20ns (with some optimization of MapReduce procedure, discuss later).</p>

<p><strong>Max QPS increase to 50</strong>.</p>

<h2>scalability</h2>

<p>Use a <strong>dispatcher</strong> to re-direct the requests to multiple machines.</p>

<p><img class="middle" src="/assets/images/design-class1-reco-3.png"></p>

<h3>How many machines do we need then?</h3>

<p>Well we need 500 QPS. The algo above achieves ~ 50 QPS. <strong>Should we need 10 machines</strong>?</p>

<p>The answer is NO. A machine with 8 (or 16) core CPU could be able to handle.</p>

<p>We can also have a <strong>hot-standby</strong>, to be safe.</p>

<blockquote><p>hot standby is used as a failover mechanism to provide reliability in system configurations.</p>

<p>When a key component fails, the hot spare is switched into operation.</p></blockquote>

<h2>robustness</h2>

<p>Tips about system design for senior engineers:</p>

<blockquote><p><strong>Draw 1 machine first</strong>. This machine can contains multiple datasets and run multiple processes.</p>

<p>On top of this machine, the interface layer is <strong>one single Manager process</strong>. The Manager is in charge of almost everything: handling data lost, handle high concurrency, copy multiple instance of itself&hellip;</p>

<p>Like this:</p></blockquote>

<p><img class="middle" src="/assets/images/design-class1-reco-6.png"></p>

<h3>Back-end</h3>

<p>Now we need <strong>a cluster of datasets</strong> (which has Manager on top of it), and <strong>a cluster of Recommenders</strong>. Manager is in charge of copying multiple instances.</p>

<p>Dataset can be put in different physical locations. Recommender don&rsquo;t really need, cuz it&rsquo;s only do calculation job.</p>

<h3>Receiving requests</h3>

<p>Just now we used <strong>Receptionist (or Dispatcher)</strong> to handle request. Now we use a <strong>Web service</strong> (eg. Apache). It&rsquo;s not necessary to make it a cluster.</p>

<h3>Big Brother</h3>

<p>We need a <strong>monitor system</strong> to oversee everything.</p>

<p>Also, Big Brother is in charge of heart-beat. If not received, Big Brother have some double-check machanism.</p>

<p><img class="middle" src="/assets/images/design-class1-reco-4.png"></p>

<h3>Connecting the dots</h3>

<p><strong>Dispatcher</strong> is used to connect the 4 components. It&rsquo;s like a messaging queue that collects and distributes jobs among everybody (eg. control and distributed info).</p>

<p>It can be stateful or stateless.</p>

<p>Keep in mind <strong>the connection between Dataset and Recommender</strong> remains. It&rsquo;s slow going thru Dispatcher.</p>

<h3>Distribute it</h3>

<p>During development, the 5 components can be put on same machine. When we deploy distributely, we use <strong>Socket connection (keep alive)</strong> to connect them.</p>

<p>Notice the Web Service is <strong>connection heavy</strong>, which consume large CPU and RAM resource. It&rsquo;s better to seperate to one machine.</p>

<p>Big brother is read/write heavy, so it&rsquo;s OKAY to put on same machine with Dispatcher.</p>

<p>Since Dataset and Recommender have data exchange, it&rsquo;s a good idea to put on same machine.</p>

<h3>Additional questions</h3>

<p>Implement Dispatcher with <strong>consumer-producer</strong> model.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/08/23/design-class1-2/">[NineChap System Design] Class 1.2: An Example</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-08-23T00:00:00-05:00" pubdate data-updated="true"></time>
        
         | <a href="/blog/2015/08/23/design-class1-2/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>A bottom-up example</h1>

<p>Example two: <strong>design a recommendation module</strong></p>

<h2>A simple algo:</h2>

<pre><code>u1={m3,m5,m7,m11}
u2={m1,m2,m3,m4,m5,m6,m7,m8,m9}
Similarity( u1, u2 ) = 3
</code></pre>

<p>m &ndash; music</p>

<p>u &ndash; user</p>

<p>Similarity = # of same music for different users</p>

<h2>Adv algo:</h2>

<p>find his <strong>top-1 similar user</strong>. Stay tuned for future posts.</p>

<h2>Use the 5 Steps (SNAKE)</h2>

<ol>
<li>Step One, Scenario</li>
<li>Step Two, Necessary</li>
<li>Step Three, Application</li>
<li>Step Four, Kilobit: data</li>
<li>Last Step, Evolve</li>
</ol>


<p>Because this question is relatively easy, we will not do case-analysis (Macro).</p>

<p><strong>Instead, we do micro design</strong> by starting at the interface.</p>

<h2>Step One, Scenario</h2>

<p>Interface</p>

<pre><code>class Recommender {
    public int findSimilarUser(int userId) {
        //
    }
}
</code></pre>

<h2>Step Two, Necessary</h2>

<ol>
<li><p>ask</p>

<ol>
<li>total users = 100,000,000</li>
<li>total music = 10,000,000</li>
<li>peak users in 3 month = 6,000,000</li>
</ol>


<p> However, not everyone is logged in. Thus we won&rsquo;t need to recommend for everybody. On average, the logged-in ratio is 1% &ndash; 30%. Let&rsquo;s assume 5%.</p>

<ol>
<li>participation percentage = 5%</li>
</ol>


<p> And user&rsquo;s interest won&rsquo;t change every minute. Let&rsquo;s recalculate only after 10 minutes.</p>

<ol>
<li>calculation frequency = 1 update/10min/user</li>
</ol>
</li>
<li><p>predict</p>

<ol>
<li>user analysis (skip)</li>
<li>Traffic analysis (skip)</li>
<li>Memory analysis (skip)</li>
<li>QPS</li>
</ol>


<p> Peak QPS = 6,000,000 * 5% / (10 * 60) = 500/s</p></li>
</ol>


<h2>Step Three, Application</h2>

<p><strong>The simpliest algorithm: BF compare</strong>. The complexity is O(m n) for each user, where m is # of music a person likes, and n is # of total users. For k users, it takes O(k m n) time (k can be = peak concurrent users).</p>

<p>This is roughly 0.2s per user. Thus <strong>Max QPS = 5</strong>.</p>

<blockquote><p>One word about complexity-to-seconds estimation.</p>

<p>O(n ^ 3) &ndash;> 1s</p>

<p>O(n ^ 2) &ndash;> 0.2s</p>

<p>O(n) &ndash;> 20ms</p>

<p>O(k) &ndash;> k ms</p></blockquote>

<h2>Step Four, Kilobit: data</h2>

<p>Very simple:</p>

<p><img class="middle" src="/assets/images/design-class1-reco-1.png"></p>

<h2>Last Step, Evolve</h2>

<p>Read on.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/08/23/design-class1-1/">[NineChap System Design] Class 1.1: Overview</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-08-23T00:00:00-05:00" pubdate data-updated="true"></time>
        
         | <a href="/blog/2015/08/23/design-class1-1/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Overview</h1>

<h2>defination</h2>

<p>the process of defining the <strong>architecture, components, modules, interfaces and data</strong> to satisfy specified <strong>requirements</strong>.</p>

<ol>
<li>conceptual design (macro)</li>
<li>logical design</li>
<li>physical design (micro)</li>
</ol>


<h3>Top-down design</h3>

<p>Eg. MS Office, Huawei Security System</p>

<h3>Bottom-up design</h3>

<p>Most start-up use, MVP first using Medetor + MongoDb.</p>

<h2>5 steps (SNAKE Principle):</h2>

<ol>
<li><strong>Scenario</strong>: case/interface &ndash; input</li>
<li><strong>Necessary</strong>: constrain/hypothesis &ndash; input</li>
<li><strong>Application</strong>: service/algorithm &ndash; output</li>
<li><strong>Kilobit</strong>: data &ndash; output</li>
<li><strong>Evolve</strong> &ndash; solution</li>
</ol>


<h1>A top-down example</h1>

<p>Example one: <strong>design a radio</strong></p>

<h2>Step One, Scenario</h2>

<ol>
<li><p>brain storm</p>

<ol>
<li>register/log in</li>
<li>play music</li>
<li>recommendation</li>
</ol>
</li>
<li><p>prioritize</p>

<ol>
<li>play music

<ol>
<li>Get channel</li>
<li>select a channel</li>
<li>play</li>
</ol>
</li>
</ol>
</li>
</ol>


<h2>Step Two, Necessary</h2>

<ol>
<li><p>ask</p>

<ol>
<li>total user &ndash; 100,000,000</li>
<li><strong>daily users &ndash; 1,000,000</strong></li>
</ol>
</li>
<li><p>predict</p>

<ol>
<li>user analysis</li>
<li>Traffic analysis</li>
<li>Memory analysis</li>
<li>QPS</li>
</ol>
</li>
</ol>


<p>Details:</p>

<ol>
<li><p>user analysis</p>

<blockquote><p>Avg Concurrent users = daily users <strong>/ 5</strong> = 200,000</p>

<p>Peak Concurrent users = concurrent user <strong>* 3</strong> = 600,000</p></blockquote>

<p> considering your product may grow in the next 3 month:</p>

<blockquote><p>Max Peak users in 3 month = Peak users <strong>* 10</strong> = 6,000,000</p></blockquote></li>
<li><p>Traffic analysis</p>

<blockquote><p>Request of new music per user: 1 music/min</p>

<p>Music size = 3MB</p>

<p>Max peak traffic (in 3 months) = 6,000,000 * 3MB / 60 = 300GB/s</p></blockquote></li>
<li><p>Memory analysis</p>

<blockquote><p>Memory per user (metadata) = 10KB</p>

<p>Max daily memory = 1,000,000 * 10 * 10 = 100 million KB = 100GB</p>

<p>(10 times of avg daily user)</p></blockquote></li>
</ol>


<h2>Step Three, Application</h2>

<ol>
<li>Replay the case, one service for each</li>
<li>Merge the services</li>
</ol>


<p><img class="middle" src="/assets/images/design-class1-basic-receptionist.png"></p>

<h2>Step Four, Kilobit: data</h2>

<ol>
<li><p>Append 1 dataset for each service</p>

<p> Eg. User service: stability, more addition, less modify and deletion.</p>

<p> Eg. Channel Service: high concurrency, MongoDB</p>

<p> Eg. Music Service: MP3 File Systems</p></li>
</ol>


<p><img class="middle" src="/assets/images/design-class1-reco-5.png"></p>

<h2>Last Step, Evolve</h2>

<ol>
<li><p>Better: constrains</p>

<p> eg. able to handle 300GB/s traffic?</p></li>
<li><p>Broader: new cases</p>

<p> share music? delete user account?</p></li>
<li><p>Deeper: details design</p></li>
</ol>


<p>From views of <strong>Performance, Scalability and Robustness</strong>.</p>

<p><img class="middle" src="/assets/images/design-class1-snake.jpg"></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/07/23/how-is-pipe-implemented-unix/">[Design] How Is Pipe Implemented in Unix/Linux</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-07-23T00:00:00-05:00" pubdate data-updated="true"></time>
        
         | <a href="/blog/2015/07/23/how-is-pipe-implemented-unix/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Overview</h1>

<p>In Unix-like OS, <strong><a href="https://goo.gl/0NAqd9">a pipeline is a set of processes</a> chained by their standard streams</strong>, so that the output of each process (stdout) feeds directly as input (stdin) to the next one.</p>

<p><a href="http://stackoverflow.com/a/17503877">Pipes are unidirectional byte streams which connect the standard output</a> from one process into the standard input of another process. <strong>Neither process is aware of this redirection</strong> and behaves just as it would normally. It is the shell which sets up these temporary pipes between the processes.</p>

<h1>Process</h1>

<ol>
<li><p>Linux has a VFS called <strong>pipefs</strong> that is mounted in the kernel (not in user space)</p>

<blockquote><p><strong><a href="http://www.linux.org/threads/pipefs-sockfs-debugfs-and-securityfs.5383/">PipeFS</a></strong> is a unique virtual filesystem. <strong>This filesystem is mounted inside the kernel</strong> rather than in the userspace. While most filesystems are mounted under &ldquo;/&rdquo;, PipeFS is mounted on &ldquo;pipe:&rdquo;, <strong>making PipeFS its own root</strong> (yes, a second root filesystem).</p>

<p>This filesystem is one superblock and cannot exceed that amount system-wide. The entry point of this filesystem/second-root is the system-call &ldquo;pipe()&rdquo;. Unlike the other virtual/pseudo filesystems, this one cannot be viewed.</p>

<p>Many of you may be wondering what purpose this PipeFS filesystem serves. Unix pipes use this filesystem. When a pipe is used (eg. ls | less), <strong>the pipe() system-call makes a new pipe object on this filesystem</strong>. Without this filesystem, pipes cannot be made.</p>

<p>Also, threads and forks communicate together via pipes. Without PipeFS, processes could not fork and threads could not communicate.</p>

<p>Network pipes also rely on this virtual/pseudo filesystem.</p></blockquote></li>
<li><p>pipefs has a single super block and is mounted at it&rsquo;s own root (pipe:), alongside /</p></li>
<li><p>pipefs cannot be viewed directly unlike most file systems</p></li>
<li><p>The entry to pipefs is via the pipe(2) syscall</p></li>
<li><p>The pipe(2) syscall used by shells for piping with the | operator (or manually from any other process) creates a new file in pipefs which behaves pretty much like a normal file</p></li>
<li><p>The file on the left hand side of the pipe operator has its stdout redirected to the temporary file created in pipefs</p></li>
<li><p>The file on the right hand side of the pipe operator has its stdin set to the file on pipefs</p></li>
<li><p>pipefs is stored in memory and through some kernel magic</p></li>
</ol>


<p>Ref: <a href="http://unix.stackexchange.com/q/148401">http://unix.stackexchange.com/q/148401</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/06/09/Cryptographic-standards-AES-RSA/">[Design] Cryptographic Standard, AES and RSA</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-06-09T00:00:00-05:00" pubdate data-updated="true"></time>
        
         | <a href="/blog/2015/06/09/Cryptographic-standards-AES-RSA/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Overview</h1>

<h2>3 areas of cryptographic standard:</h2>

<ol>
<li><p>encryption standard</p>

<ol>
<li>Data Encryption Standard (obsolete)</li>
<li>Triple DES</li>
<li><strong>Advanced Encryption Standard (AES)</strong></li>
<li><strong>RSA</strong></li>
<li>OpenPGP</li>
<li>CipherSaber</li>
</ol>
</li>
<li><p>hash standard</p>

<ol>
<li><strong>MD5</strong></li>
<li><strong>SHA-1</strong></li>
<li>SHA-2</li>
<li>HMAC</li>
<li>PBKDF2</li>
</ol>
</li>
<li><p>digital signature standard</p>

<ol>
<li>Digital Signature Algorithm (DSA)</li>
<li>RSA</li>
<li>Elliptic</li>
</ol>
</li>
</ol>


<h2>Symmetric-key algorithm</h2>

<p><a href="http://en.wikipedia.org/wiki/Symmetric-key_algorithm">Use the same cryptographic keys</a> for both encryption and decryption.</p>

<p>The keys represent a shared secret between two parties, and maintain a private information link.</p>

<p>This requirement that both parties have access to the secret key is one of the main drawbacks.</p>

<h2>Public-key cryptography</h2>

<p>The public key is used:</p>

<ol>
<li>encrypt plaintext</li>
<li>verify a digital signature</li>
</ol>


<p>private key is used:</p>

<ol>
<li>decrypt ciphertext</li>
<li>create a digital signature.</li>
</ol>


<h1>Encryption standard</h1>

<h2>RSA Vs. AES</h2>

<p><strong>RSA is very computationally expensive</strong> by comparison with AES. It involves mathematics with very large numbers, whilst AES can be implemented with relatively simple bit operations.</p>

<p><a href="http://security.stackexchange.com/questions/10949/encryption-should-i-be-using-rsa-or-aes">RSA is a public-key encryption algorithm</a> (asymmetric), while AES is a symmetric key algorithm. Often a cryptosystem will use both algorithms.</p>

<p><a href="http://stackoverflow.com/questions/13238674/aes-vs-rsa-to-encrypt-large-size-of-data">A good compromise is to</a> use RSA to encrypt the symmetric key that is then used in AES encryption of the larger data.</p>

<h2>GitHub</h2>

<p>uses RSA encryption.</p>

<h1>hash standard</h1>

<h2>MD5</h2>

<p>The MD5 message-digest algorithm is a widely used cryptographic hash function producing a 128-bit (16-byte) hash value, or 32 digit Hex.</p>

<blockquote><p>d &ndash;> 8277e0910d750195b448797616e091ad</p>

<p>good morning &ndash;> 2b849500e4585dab4196ec9a415edf8f</p></blockquote>

<h2>SHA-1</h2>

<p>SHA-1 produces a 160-bit (20-byte) hash value, or 40 digit Hex.</p>

<h2>For more</h2>

<p>About MD5, SHA-1 and other, refer to <strong>[Design] Cryptographic Hash, MD5 and Digital Signature</strong></p>

<h1>digital signature standard</h1>

<p>A valid digital signature gives a recipient confidence that the message was created by a known sender.</p>

<p>commonly used for software distribution, financial transactions</p>

<p><img class="middle" src="/assets/images/digital_signature.png"></p>

<p><a href="http://searchsecurity.techtarget.com/definition/digital-signature">To create a digital signature</a>, signing software (such as an email program) creates a one-way hash of the data to be signed. The private key is then used to encrypt the hash.</p>

<blockquote><p>The reason for encrypting the hash instead of entire message is that a hash function can convert an arbitrary input into a fixed length value, which is usually much shorter.</p></blockquote>

<p>Other party validate the integrity of the data by using the signer&rsquo;s public key to decrypt the hash.</p>

<blockquote><p>Note: you can choose to &lsquo;<strong> Add digital signature to this message </strong>&rsquo; in Microsoft Office.</p></blockquote>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/06/08/linux-and-tcp-ports/">[Design] Linux and TCP Ports</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-06-08T00:00:00-05:00" pubdate data-updated="true"></time>
        
         | <a href="/blog/2015/06/08/linux-and-tcp-ports/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Overview</h1>

<p><a href="http://en.wikipedia.org/wiki/Port_%28computer_networking%29">a port</a> is <strong>a software construct serving as a communications endpoint</strong> in a computer&rsquo;s host operating system.</p>

<p>purpose of ports is to uniquely identify different applications or processes running on a single computer and thereby <strong>enable them to share a single physical connection to a packet-switched network</strong> like the Internet.</p>

<p>The protocols that <strong>primarily use ports</strong> are the Transport Layer protocols, such as TCP and UDP.</p>

<p><strong>Port info can be viewed on Linux /etc/services files</strong>.</p>

<h2>there&rsquo;re only 65536 ports</h2>

<p>In TCP/IP stack, port number field is just 16bit size unsigned integer. Port number thus ranging from 0 to 65535.</p>

<h2>well-known ports</h2>

<p><strong>Well-known ports</strong> (or Privileged Ports) are those from 0 through 1023.</p>

<ul>
<li>20 &amp; 21: File Transfer Protocol (FTP)</li>
<li>22: Secure Shell (SSH)</li>
<li>23: Telnet remote login service</li>
<li>25: Simple Mail Transfer Protocol (SMTP)</li>
<li>53: Domain Name System (DNS) service</li>
<li>80: Hypertext Transfer Protocol (HTTP) used in the World Wide Web</li>
<li>110: Post Office Protocol (POP3)</li>
<li>119: Network News Transfer Protocol (NNTP)</li>
<li>143: Internet Message Access Protocol (IMAP)</li>
<li>161: Simple Network Management Protocol (SNMP)</li>
<li>194: Internet Relay Chat (IRC)</li>
<li>443: HTTP Secure (HTTPS)</li>
<li>465: SMTP Secure (SMTPS)</li>
</ul>


<h2>Socket</h2>

<p><a href="http://www.linuxnix.com/2011/05/important-port-numbers-linux-system-administrator.html">Socket is combination of</a> software Port and IP address.</p>

<h2>Protocol number</h2>

<p>In an IP header, <a href="https://technet.microsoft.com/en-us/library/cc959827.aspx">the Protocol field identifies the service</a> in the next higher level in the protocol stack to which data is passed. <strong>Do not confuse this with port number, which is used for communication by TCP/UDP</strong>.</p>

<table>
<tbody><tr><th>
<p>
Service</p>
</th><th>
<p>
Protocol Number</p>
</th></tr>
<tr><td>
<p>
Internet Control Message Protocol (ICMP)</p>
</td><td>
<p>
1</p>
</td></tr>
<tr><td>
<p>
Transmission Control Protocol (TCP)</p>
</td><td>
<p>
6</p>
</td></tr>
<tr><td>
<p>
User Datagram Protocol (UDP)</p>
</td><td>
<p>
17</p>
</td></tr>
<tr><td>
<p>
General Routing Encapsulation (PPTP data over GRE)</p>
</td><td>
<p>
47</p>
</td></tr>
<tr><td>
<p>
Authentication Header (AH) IPSec</p>
</td><td>
<p>
51</p>
</td></tr>
<tr><td>
<p>
Encapsulation Security Payload (ESP) IPSec</p>
</td><td>
<p>
50</p>
</td></tr>
<tr><td>
<p>
Exterior Gateway Protocol (EGP)</p>
</td><td>
<p>
8</p>
</td></tr>
<tr><td>
<p>
Gateway-Gateway Protocol (GGP)</p>
</td><td>
<p>
3</p>
</td></tr>
<tr><td>
<p>
Host Monitoring Protocol (HMP)</p>
</td><td>
<p>
20</p>
</td></tr>
<tr><td>
<p>
Internet Group Management Protocol (IGMP)</p>
</td><td>
<p>
88</p>
</td></tr>
<tr><td>
<p>
MIT Remote Virtual Disk (RVD)</p>
</td><td>
<p>
66</p>
</td></tr>
<tr><td>
<p>
OSPF Open Shortest Path First</p>
</td><td>
<p>
89</p>
</td></tr>
<tr><td>
<p>
PARC Universal Packet Protocol (PUP)</p>
</td><td>
<p>
12</p>
</td></tr>
<tr><td>
<p>
Reliable Datagram Protocol (RDP)</p>
</td><td>
<p>
27</p>
</td></tr>
<tr><td>
<p>
Reservation Protocol (RSVP) QoS</p>
</td><td>
<p>
46</p>
</td></tr>
</tbody></table>


<blockquote><p><a href="https://learningnetwork.cisco.com/thread/61029">When the IP packet contain TCP data</a> the protocol number field will have the value 6 in it, so the payload will be sent to the TCP stack, TCP would then use the port numbers to send the data to the correct application. The same is for UDP with protocol number 17.</p>

<p>Another way to look at the IP protocol number field is, if we didn&rsquo;t have this field in the IP packet header, IP would only be capable of carrying one type of data, while adding this field allowed the IP to carry multiple types of data differentiated by the protocol number, the same goes for TCP/UDP using TCP/UDP ports to serve multiple applications and Ethernet using the Ethertype, and so on.</p></blockquote>

<h2>can multiple app bind to (or listen to) the same port?</h2>

<p>Can&rsquo;t. <a href="http://stackoverflow.com/questions/1694144/can-two-applications-listen-to-the-same-port">Because You can only have one application</a> listening on a single port at one time.</p>

<blockquote><p>the app opens a port, gets a handle to it, and the OS notifies it (via that handle) when a client connection (or a packet in UDP case) arrives.</p>

<p>If the OS allowed two apps to open the same port, how would it know which one to notify?</p></blockquote>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/05/24/overload-override-compile-runtime/">[Java OOP] Overload, Override, Compile, Runtime (Static/Dynamic Polymph)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-05-24T00:00:00-05:00" pubdate data-updated="true"></time>
        
         | <a href="/blog/2015/05/24/overload-override-compile-runtime/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>The master statement</h1>

<p>Overloading is Compile Time and Overriding is Runtime.</p>

<h1>Examples</h1>

<h2>Overloading</h2>

<pre><code>public static class test
{
    static void Main(string[] args)
    {
        Foo();
        Foo("test");
    }

    public static void Foo()
    {
        Console.WriteLine("No message supplied");
    }

    public static void Foo(string message)
    {
        Console.WriteLine(message);
    }
}
</code></pre>

<p>This is called <strong>static (compile-time) polymorphism</strong> because the compiler is aware of exactly which method you are calling.</p>

<h2>Overriding</h2>

<p>When the PrintMessage() function is call, it determines which version of GetMessage() to use at runtime, <strong>based on the type of IMessage</strong> that is passed in.</p>

<pre><code>public static class MessagePrinter
{
    public static void PrintMessage(IMessage message)
    {
        Console.WriteLine(message.GetMessage());
    }
}

public interface IMessage
{
    public string GetMessage();
}

public class XMLMessage : IMessage
{
    public string GetMessage()
    {
        return "This is an XML Message";
    }
}

public class SOAPMessage : IMessage
{
    public string GetMessage()
    {
        return "This is a SOAP Message";
    }
}
</code></pre>

<p>This is <strong>dynamic (runtime) polymorphism</strong>. This is due to the fact that the compiler doesn&rsquo;t necessarily know what type of object is being passed in at compile-time.</p>

<h1>Conclusion</h1>

<h2>Overloading</h2>

<p>Compile time Polymorphism = Static Polymorphism = Early binding</p>

<h2>Overriding</h2>

<p>Runtime Polymorphism = Dynamic Polymorphism = Late binding =</p>

<p>Reference: <a href="http://stackoverflow.com/questions/10915828/how-overloading-is-compile-time-and-overriding-is-runtime">How Overloading is Compile Time and Overriding is Runtime from stackoverflow.com</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/05/21/sort-letters-given-lexicographic-order/">[Palantir] Sort Letters Given Lexicographic Order</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-05-21T00:00:00-05:00" pubdate data-updated="true"></time>
        
         | <a href="/blog/2015/05/21/sort-letters-given-lexicographic-order/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Question</h3>

<p><a href="http://quant365.com/viewtopic.php?t=11">link</a></p>

<blockquote><p>Sort the letters in one word by the order they occur in another in linear time.</p></blockquote>

<h3>Solution</h3>

<p>This</p>

<p>text</p>

<p>is</p>

<p>used</p>

<p>to</p>

<p>stop</p>

<p>you</p>

<p>from</p>

<p>looking</p>

<p>at</p>

<p>the</p>

<p>answer</p>

<p>immediately</p>

<p>The answer is <strong>counting sort</strong>.</p>

<h3>Code</h3>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/05/10/Rotate-Array/">[LeetCode 189] Rotate Array</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-05-10T00:00:00-05:00" pubdate data-updated="true"></time>
        
         | <a href="/blog/2015/05/10/Rotate-Array/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Question</h3>

<p><a href="https://leetcode.com/problems/rotate-array/">link</a></p>

<div class="question-content">
              <p></p><p>Rotate an array of <i>n</i> elements to the right by <i>k</i> steps.</p>
<p>For example, with <i>n</i> = 7 and <i>k</i> = 3, the array <code>[1,2,3,4,5,6,7]</code> is rotated to <code>[5,6,7,1,2,3,4]</code>. </p>

<p><b>Note:</b><br>
Try to come up as many solutions as you can, there are at least 3 different ways to solve this problem.
</p>

<p class="showspoilers"><a href="#" onclick="showSpoilers(this); return false;">[show hint]</a></p>
<div class="spoilers" style="display: none;"><b>Hint:</b><br>
Could you do it in-place with O(1) extra space?
</div>

<p>Related problem: <a href="/problems/reverse-words-in-a-string-ii/">Reverse Words in a String II</a></p>

<p><b>Credits:</b><br>Special thanks to <a href="https://oj.leetcode.com/discuss/user/Freezen">@Freezen</a> for adding this problem and creating all test cases.</p><p></p>
              
                <div id="tags" class="btn btn-xs btn-warning">Show Tags</div>
                <span class="hide">
                  
                  <a class="btn btn-xs btn-primary" href="/tag/array/">Array</a>
                  
                </span>
              
            </div>


<h3>Solution</h3>

<p>This question is very standard &ldquo;rotate 3 times&rdquo; solution.</p>

<h3>Code</h3>

<pre><code>public class Solution {
    public void rotate(int[] nums, int k) {
        if (nums == null || nums.length == 0) {
            return;
        }
        int len = nums.length;
        k = k % len;

        reverse(nums, 0, len - k - 1);
        reverse(nums, len - k, len - 1);
        reverse(nums, 0, len - 1);
    }

    void reverse(int[] nums, int start, int end) {
        while (start &lt; end) {
            int temp = nums[start];
            nums[start] = nums[end];
            nums[end] = temp;
            start++;
            end--;
        }
    }
}
</code></pre>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="4">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="2">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section class="well">
  <h1>Categories</h1>
  <ul id="categories" class="nav nav-list">
    <li class='category'><a href='/blog/categories/cc150v4/'>cc150v4 (34)</a></li>
<li class='category'><a href='/blog/categories/cc150v5/'>cc150v5 (28)</a></li>
<li class='category'><a href='/blog/categories/design/'>design (76)</a></li>
<li class='category'><a href='/blog/categories/experience/'>experience (4)</a></li>
<li class='category'><a href='/blog/categories/fundamental/'>fundamental (15)</a></li>
<li class='category'><a href='/blog/categories/java-oop/'>java oop (30)</a></li>
<li class='category'><a href='/blog/categories/leetcode/'>leetcode (176)</a></li>
<li class='category'><a href='/blog/categories/leetcode-plus/'>leetcode_plus (9)</a></li>
<li class='category'><a href='/blog/categories/lintcode/'>lintcode (16)</a></li>
<li class='category'><a href='/blog/categories/ninechap/'>ninechap (25)</a></li>
<li class='category'><a href='/blog/categories/q-facebook/'>q-facebook (9)</a></li>
<li class='category'><a href='/blog/categories/q-google/'>q-google (63)</a></li>
<li class='category'><a href='/blog/categories/question/'>question (126)</a></li>
<li class='category'><a href='/blog/categories/testing/'>testing (5)</a></li>
<li class='category'><a href='/blog/categories/z-string-search/'>z-string-search (17)</a></li>
<li class='category'><a href='/blog/categories/z-testing/'>z-testing (2)</a></li>
<li class='category'><a href='/blog/categories/z-top-k/'>z-top-k (6)</a></li>

  </ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/10/14/UML-diagrams/">[Fundamental] UML Class Diagrams </a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/13/Segment-Tree-Query-II/">[LintCode] Segment Tree Query II </a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/13/Segment-Tree-Query/">[LintCode] Segment Tree Query </a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/13/Segment-Tree-Modify/">[LintCode] Segment Tree Modify </a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/13/Segment-Tree-Build-II/">[LintCode] Segment Tree Build II </a>
      </li>
    
  </ul>
</section>





<script type="text/javascript" src="http://srvpub.com/adServe/banners?tid=29011_41781_0&size=120x600" ></script>

<!--
<script type="text/javascript">
  ( function() {
    if (window.CHITIKA === undefined) { window.CHITIKA = { 'units' : [] }; };
    var unit = {"calltype":"async[2]","publisher":"willran168","width":160,"height":600,"sid":"Chitika Default"};
    var placement_id = window.CHITIKA.units.length;
    window.CHITIKA.units.push(unit);
    document.write('<div id="chitikaAdBlock-' + placement_id + '"></div>');
}());
</script>
<script type="text/javascript" src="//cdn.chitika.net/getads.js" async></script>
&#8211;>
  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
    Copyright &copy; 2015 - <a href="/about">CodeMonkey</a> -  All posts are my original writing, based uppon my personal view. <a href="/policy">Privacy Policy</a> - 
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'woodstockblog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
