
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Shuatiblog.com</title>
  <meta name="author" content="CodeMonkey">

  
  <meta name="description" content="Question link Given n buildings, each building is an rectangle located on
x-axis, and indicated by (x1, x2, height). Calculate the
outline of all &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.shuatiblog.com/posts/39/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Shuatiblog.com" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-52495723-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.shuatiblog.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
    <li><a href="/">
        <span class="blue_light">
            Shuatiblog.com
        </span>
       
    </a></li>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About me</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/07/01/The-Skyline-Problem/">[Question] the Skyline Problem</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-07-01T00:00:00+08:00" pubdate data-updated="true"></time>
        
         | <a href="/blog/2014/07/01/The-Skyline-Problem/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Question</h3>

<p><a href="http://www.algorithmist.com/index.php/UVa_105">link</a></p>

<blockquote><p>Given n buildings, each building is an rectangle located on
x-axis, and indicated by (x1, x2, height). Calculate the
outline of all buildings. Output them in order.</p></blockquote>

<h3>Solution</h3>

<p><strong>Solution 1 is keeping a heightmap (Brute force)</strong>. Keep an array of a certain size, and update max_height for every single point.</p>

<p><strong>Solution 2 is using Sweeping line algorithm</strong>. Sweep from left to right, always try to find the largest height of the rectangle.</p>

<p>First make sure the rectangles are sorted. While sweeping, if sees an building-start, insert the height to the heap. If a building-end, remove from the heap. Then the current maximum height is the max point in the heap. A visualized explanation can be found <a href="https://briangordon.github.io/2014/08/the-skyline-problem.html">here</a>.</p>

<p>Total cost is O(nlogn), <a href="http://qr.ae/Yt74m">source</a>.</p>

<p><strong>Two solutions compared</strong>:</p>

<ol>
<li><p>In the brute force approach, doubling the width of the buildings will double the runtime cost. With the sweep line algorithm, it won&rsquo;t.</p></li>
<li><p>Sweep Line algorithm will work if the input is not discrete, whereas the heightmap approach requires integer coordinates.</p></li>
</ol>


<p><strong>Updated on Feb 1st, 2015</strong>: using floor 26 of <a href="http://www.mitbbs.com/article_t1/JobHunting/32569901_0_2.html">this post</a>, we can do insertion and deletion in max-heap, then peek the largest element in the heap.</p>

<blockquote><p>把所有的turning points 放在一起，根据coordination从小到大sort 。</p>

<p>再用max-heap, 把所有的turning points扫一遍，遇到start turning point, 把
volume放入max-heap. 遇到end turning point，把对应的volume从max-heap中取出。</p>

<p>max-heap的max 值就是对应区间的最大volume</p></blockquote>

<p>Code presented below.</p>

<h3>Code</h3>

<p>Brate force code from <a href="http://www.cs.ucf.edu/~dmarino/ucf/java/Skyline.java">ucf</a>:</p>

<pre><code>public static void main(String[] args) throws IOException {

    Scanner fin = new Scanner(new File("skyline.in"));

    // Read in general information about the buildings and skyline.
    int numbuildings = fin.nextInt();
    int min = fin.nextInt();
    int max = fin.nextInt();
    int size = max - min;

    // Initialize the skyline.
    int[] mysky = new int[size];
    for (int i = 0; i &lt; size; i++)
        mysky[i] = 0;

    // For each building, edit the skyline as necessary.
    for (int i = 0; i &lt; numbuildings; i++) {
        int left = fin.nextInt();
        int height = fin.nextInt();
        int right = fin.nextInt();

        // Note how we have to offset the left and right boundaries
        // due to how we set up our array. Basically, at each segment
        // of the skyline that the current building is part of, we see
        // if this current building is the tallest of the ones there.
        // If so, we make the necessary update.
        for (int j = left - min; j &lt; right - min; j++)
            if (height &gt; mysky[j])
                mysky[j] = height;
    }

    // Beginning of the skyline.
    System.out.print(min + " ");
    int cnt = 0;

    // Keep on going until you get right before the end of the skyline.
    while (cnt &lt; size - 1) {

        // Increment cnt as long as the height is the same.
        while (cnt &lt; size - 1 &amp;&amp; mysky[cnt] == mysky[cnt + 1])
            cnt++;

        // Print out information for this part of the skyline.
        System.out.print(mysky[cnt] + " " + (cnt + 1 + min) + " ");
        cnt++;
    }

    // This is the case where the last segment is unique.
    if (cnt == size - 1)
        System.out.print(mysky[size - 1] + " " + max);
    System.out.println();
    fin.close();
}
</code></pre>

<p>The heap solution:</p>

<pre><code>public int[] skyline(List&lt;Building&gt; bds, int min, int max) {
    int[] output = new int[max - min];

    List&lt;Edge&gt;[] edges = new List[max - min];
    for (int i = 0; i &lt; edges.length; i++) {
        edges[i] = new ArrayList&lt;Edge&gt;();
    }
    for (Building b : bds) {
        // put all edges into an array of edges
        edges[b.from].add(new Edge(b, true));
        edges[b.to].add(new Edge(b, false));
    }

    Queue&lt;Building&gt; heap = new PriorityQueue&lt;Building&gt;(100,
            new Comparator&lt;Building&gt;() {
                public int compare(Building b1, Building b2) {
                    return b2.height - b1.height;
                }
            });
    for (int i = 0; i &lt; edges.length; i++) {
        // insert or remove each building at position i into max heap
        for (Edge e : edges[i]) {
            if (e.isEnter) {
                heap.add(e.building);
            } else {
                heap.remove(e.building);
            }
        }
        // then culculate the current hight, which is top of the heap
        if (!heap.isEmpty()) {
            output[i] = heap.peek().height;
        }
    }

    return output;
}

static class Edge {
    Building building;
    boolean isEnter;

    public Edge(Building bld, boolean enter) {
        building = bld;
        isEnter = enter;
    }
}

static class Building {
    int from;
    int to;
    int height;

    public Building(int a, int b, int c) {
        from = a;
        to = b;
        height = c;
    }
}
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/07/01/Min-Stack/">[Question] Min Stack</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-07-01T00:00:00+08:00" pubdate data-updated="true"></time>
        
         | <a href="/blog/2014/07/01/Min-Stack/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Question</h3>

<p><a href="http://www.geeksforgeeks.org/design-and-implement-special-stack-data-structure/">link</a></p>

<blockquote><p>Implement a stack, enable O(1) Push, Pop Top, Min. Where Min() will return the value of minimum number in the stack.</p></blockquote>

<h3>Solution</h3>

<p>Using two stacks.</p>

<p>The first one is the regular stack.</p>

<p>The second one only store minimum numbers.</p>

<p>Eg:</p>

<blockquote><p>Actual stack: (head) 16 15 29 19 18 (tail)</p>

<p>Auxiliary Stack: (head) 15 15 18 18 18 (tail)</p></blockquote>

<h3>Code</h3>

<p>Psudu-code:</p>

<pre><code>Push(int x):
1) push x to the first stack (the stack with actual elements)
2) compare x with the top element of the second stack (the auxiliary stack). Let the top element be y.
…..a) If x is smaller than y then push x to the auxiliary stack.
…..b) If x is greater than y then push y to the auxiliary stack.

Pop():
1) pop the top element from the auxiliary stack.
2) pop the top element from the actual stack and return it.
</code></pre>

<p>Code is skipped.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/07/01/Median-in-stream-of-integers/">[Question] Median in a Stream of Integers</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-07-01T00:00:00+08:00" pubdate data-updated="true"></time>
        
         | <a href="/blog/2014/07/01/Median-in-stream-of-integers/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Question</h3>

<p><a href="http://www.geeksforgeeks.org/median-of-stream-of-integers-running-integers/">link</a></p>

<blockquote><p>Given that integers are read from a data stream. Find median of elements read so for in efficient way.</p>

<p>For simplicity assume there are no duplicates. For example, let us consider the stream 5, 15, 1, 3 … The stream of output is 5, 10, 1, 4 …</p></blockquote>

<h3>Solution</h3>

<blockquote><p>we can use a max heap on left side to represent elements that are less than effective median, and a min heap on right side to represent elements that are greater than effective median.</p>

<p>After processing an incoming element, the number of elements in heaps differ utmost by 1 element. <a href="http://www.geeksforgeeks.org/median-of-stream-of-integers-running-integers/">source</a></p></blockquote>

<p>So we know that java.util.PriorityQueue is a max-heap. The only question is, how to implement a min-heap? <a href="http://stackoverflow.com/a/1098454">Someone sugests</a> writing your own customized Comparator:</p>

<blockquote><p>you use two instances of a java.util.PriorityQueue containing the same elements? The first instance would be passed a comparator which puts the maximum at the head, and the second instance would use a comparator which puts the minimum at the head.</p></blockquote>

<h3>Code</h3>

<p>skipped</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/07/01/Implement-queue-with-stack/">[Question] Implement Queue Using Stacks</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-07-01T00:00:00+08:00" pubdate data-updated="true"></time>
        
         | <a href="/blog/2014/07/01/Implement-queue-with-stack/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Question</h3>

<p><a href="http://www.geeksforgeeks.org/queue-using-stacks/">link</a></p>

<blockquote><p>Implement a queue by two stacks. Support O (1) push, pop, top.</p></blockquote>

<h3>Solution</h3>

<p>Q.Push(x): S1-Push(x)</p>

<p>Q.Pop(): if S2.empty &ndash;> S1->S2 S2.pop()</p>

<p>Q.Top(): Similar with Q.Pop()</p>

<p>Learn and compare with another question <strong>[Question] Implement Stack using Two Queues</strong>.</p>

<h3>Code</h3>

<p>skipped</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/07/01/Implement-Hashmap/">[Question] Implement a HashMap</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-07-01T00:00:00+08:00" pubdate data-updated="true"></time>
        
         | <a href="/blog/2014/07/01/Implement-Hashmap/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Question</h3>

<p>Implement a HashMap</p>

<p><strong>Hint</strong>:</p>

<blockquote><p>An instance of HashMap has two parameters that affect its performance: initial capacity and load factor. The capacity is the number of buckets in the hash table, and the initial capacity is simply the capacity at the time the hash table is created. The load factor is a measure of how full the hash table is allowed to get before its capacity is automatically increased. When the number of entries in the hash table exceeds the product of the load factor and the current capacity, the hash table is rehashed (that is, internal data structures are rebuilt) so that the hash table has approximately twice the number of buckets. <a href="http://stackoverflow.com/a/10901821">source</a></p>

<p>Load factor = n/k where n is the number of entries and k is the number of buckets.</p></blockquote>

<h3>Analysis</h3>

<p>Some points to take note:</p>

<ol>
<li><p>So first of all, we would need 2 important parameters in a Hashmap: <strong>initial capacity and load factor</strong>. In Java, it&rsquo;s default 0.75.</p>

<p> For example the product of capacity and load factor = 16 * 0.75 = 12. This represents that after storing the 12th key – value pair into the HashMap , its capacity will become 32.</p></li>
<li><p>Then we would need an Entry&lt;Obj, Obj> Class to store <strong>key-value pairs</strong>. Important to note the Entry would have a &lsquo;next&rsquo; pointer, in order to mimic a LinkedList.</p></li>
<li><p>Except key, value and next pointer, Entry class <strong>also need to store the &lsquo;hash&rsquo; value</strong>, because it will be used during comparison.</p></li>
<li><p>The main bucket is an array of Entry objects. It should resize when it has to, and this is <strong>done in the addEntry() method</strong>. I skipped this part of code.</p></li>
<li><p>The code for put() and get() method are similar, because it&rsquo;s bascially <strong>calculate hash</strong>, then <strong>get array index</strong>, using that index to <strong>locate the head Entry object</strong>, and then do a linear search for key. If found, put() will replace it, and get() will return it. Note than after replaced, the old value is returned (Java designed in this way, I personally wouldn&rsquo;t do this).</p></li>
<li><p>Last important thing is the <strong>indexFor() method</strong>. It looks useless to me at first, then I realize that this method is mapping my hash value into the index in the array. Fine, but this bit operation still looks odd. Look at next section for more.</p></li>
</ol>


<h3>The Niubility Operation: h &amp; (length &ndash; 1)</h3>

<p>This actually equals to the value of (h % length). It converts the hash value into array index.</p>

<blockquote><p>这个方法非常巧妙，它通过 h &amp; (length &ndash; 1) 来得到该对象的保存位，而HashMap底层数组的长度总是 2 的 n 次方，这是HashMap在速度上的优化。</p>

<p>当length总是 2 的n次方时，h &amp; (length &ndash; 1)运算等价于对length取模，也就是h % length，但是 &amp; 比 % 具有更高的效率。<a href="http://www.cnblogs.com/-clq/archive/2012/01/11/2318870.html">source</a></p></blockquote>

<p>That&rsquo;s all about implementing a HashMap. It&rsquo;s difficult, but having a general idea definitely helps.</p>

<p>What&rsquo;s more, know the mod operation &ldquo;h &amp; (length &ndash; 1)&rdquo; would definitely help you grab some attentions!</p>

<h3>Code</h3>

<pre><code>public class MyHashMap {

    Pair[] table;
    float loadFactor;
    int size;

    public MyHashMap(int initialCapacity, float loadFactor) {
        if (initialCapacity &lt; 0 || loadFactor &lt;= 0) {
            return;
        }
        table = new Pair[initialCapacity];
        this.size = 0;
        this.loadFactor = loadFactor;
    }

    public String get(int key) {
        int hash = hash(key);
        int i = indexFor(hash, table.length);
        Pair e = table[i];
        for (; e != null; e = e.next) {
            if (e.hash == hash &amp;&amp; key == e.key) {
                return e.value;
            }
        }
        return null;
    }

    public String put(int key, String value) {
        int hash = hash(key);
        int i = indexFor(hash, table.length);
        Pair e = table[i];
        for (; e != null; e = e.next) {
            if (e.hash == hash &amp;&amp; key == e.key) {
                String oldValue = e.value;
                e.value = value;
                return oldValue;
            }
        }
        addEntry(hash, key, value, i);
        return null;
    }

    void addEntry(int hash, int key, String value, int i) {
        // in charge of resizing here (check the load factor)
        // resizing code is not written here
        Pair e = table[i];
        table[i] = new Pair(hash, key, value, e);
    }

    int indexFor(int h, int length) {
        return h &amp; (length - 1);
    }

    final int hash(int code) {
        // this is the hash function from java 6 source code
        code ^= (code &gt;&gt;&gt; 20) ^ (code &gt;&gt;&gt; 12);
        return code ^ (code &gt;&gt;&gt; 7) ^ (code &gt;&gt;&gt; 4);
    }

    public static void main(String[] args) {
        MyHashMap map = new MyHashMap(16, 0.5f);
        map.put(1, "a");
        map.put(2, "b");
        map.put(3, "c");
        System.out.println(map.get(1));
        System.out.println(map.get(2));
        System.out.println(map.get(3));
        map.put(1, "Spider Man");
        map.put(4, "d");
        map.put(3, "Peter Parker");
        System.out.println(map.get(1));
        System.out.println(map.get(2));
        System.out.println(map.get(3));
        System.out.println(map.get(4));
        System.out.println(map.get(5));
    }

    class Pair {
        int hash;
        int key;
        String value;
        Pair next;

        Pair(int h, int k, String v, Pair n) {
            hash = h;
            key = k;
            value = v;
            next = n;
        }
    }
}
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/07/01/Hashmap-Hashtable-Hashset/">[Design] HashMap vs Hashtable vs HashSet</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-07-01T00:00:00+08:00" pubdate data-updated="true"></time>
        
         | <a href="/blog/2014/07/01/Hashmap-Hashtable-Hashset/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Overview</h2>

<h3>HashTable</h3>

<ol>
<li>HashTable is thread safe synchronized. Only 1 thread can access at a time (compromise speed).</li>
<li>HashTable does not allow null for key and value.</li>
</ol>


<h3>HashMap &amp; HashSet</h3>

<ol>
<li>HashMap is not sync, but better performance.</li>
<li>HashMap allows null key or null value.</li>
<li>HashSet is same as HashMap, just interface difference.</li>
</ol>


<h2>Conclusion</h2>

<ol>
<li>HashMap is roughly equivalent to Hashtable, except that it is unsynchronized and permits nulls.</li>
<li>HashSet is same as HashMap. It&rsquo;s not thread safe.</li>
</ol>


<h3>Implementation</h3>

<ol>
<li>C++ Map is rbtree</li>
<li>Java HashMap is buckets + entries (using Array + LinkedList)</li>
<li>HashTable in Java is basically HashMap + lock</li>
</ol>


<h3>One more thing</h3>

<p>HashMap is locked-out during rehashing, so it&rsquo;s better to avoid rehashing (by setting initial size bigger).</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/30/NineChap-Big-date-system-design-resume/">[NineChap 9] Big Date, System Design and Resume (`)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-06-30T00:00:00+08:00" pubdate data-updated="true"></time>
        
         | <a href="/blog/2014/06/30/NineChap-Big-date-system-design-resume/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>Resume</h2>

<ol>
<li>Do not write anything unrelated to CS.</li>
<li>Do not write too long &ndash; 1 or 2 pages are fine. Senior engineer 3 pages.</li>
<li>Do not write low GPA</li>
<li>Never ever write &ldquo;proficient in anything&rdquo;</li>
</ol>


<h2>Big Data</h2>

<p>Most classic question is &ldquo;Frequent items&rdquo; (refer to July&rsquo;s blog).</p>

<h3>Find top k hot queries in a daily access log of Google.</h3>

<p>Variation:</p>

<ol>
<li>k = 1 vs k = 100000 &ndash; majority numbers</li>
<li>low RAM vs sufficient RAM</li>
<li>single machine vs multiple machines</li>
<li>accurate vs inaccurate</li>
</ol>


<p>Sufficient RAM</p>

<ol>
<li>HashTable + Heap (min-heap)</li>
<li>Time O(n * logk), Space O(n)</li>
</ol>


<p>Low RAM</p>

<ol>
<li>Split into 1000 (i.e. LOG/M) files by hash(query) % 1000</li>
<li>Using HashTable + Heap to get top k for each files</li>
<li>Collect 1000 top k queries and get global top k</li>
<li>This method requires a lot of disk access and r/w, still slow.</li>
</ol>


<p>Inaccurate (reduce memory from O(n) to O(k))</p>

<ol>
<li>Hash Count (only need to know this one)
 Limit the size of HashMap. The bigger the RAM, the more accurate is the result.</li>
<li>Space Saving</li>
<li>Lossy Counting</li>
<li>Sticky Sampling</li>
<li>Count Sketch</li>
</ol>


<p>Bloom Filter</p>

<ol>
<li>Regular bloom filter &ndash; use 4 线性无关 formula</li>
<li>Counting bloom filter &ndash; support delete</li>
<li>Better DS than HashMap, but can loose some accuracy</li>
</ol>


<p>Trie</p>

<p>Bitmap</p>

<p>Find all unique queries &ndash; use bigmap to store 3 types of states</p>

<h2>System Design</h2>

<h3>Design a short url system</h3>

<ol>
<li>Cache</li>
</ol>


<blockquote><p>to store hot urls</p></blockquote>

<ol>
<li>Load Balance</li>
</ol>


<blockquote><p>Too many click in short time</p></blockquote>

<ol>
<li>Storage balance</li>
</ol>


<blockquote><p>Hash value of an url and then store in
individual machine</p>

<p>Expansibility?</p></blockquote>

<ol>
<li>Consistent Hash</li>
</ol>


<blockquote><p>Node, can increase # of machines to store information</p>

<p>Migration process</p></blockquote>

<ol>
<li>Router</li>
</ol>


<blockquote><p>check which machine response my query</p>

<p>light-weight calculations</p>

<p>what is router is down?</p></blockquote>

<ol>
<li>Locale</li>
</ol>


<blockquote><p>url frequently access by China, then put the url storage in Beijing</p></blockquote>

<h3>Need-to-know Design patterns</h3>

<ol>
<li>Singleton</li>
<li>Factory</li>
<li>Master-slave (esp. for relational DB)</li>
</ol>


<p><a href="http://static.googleusercontent.com/media/research.google.com/en//archive/mapreduce-osdi04.pdf">MapReduce: Simplified Data Processing on Large Clusters</a></p>

<p><a href="http://static.googleusercontent.com/media/research.google.com/en//archive/gfs-sosp2003.pdf">The Google File System</a></p>

<p><a href="http://static.googleusercontent.com/media/research.google.com/en//archive/bigtable-osdi06.pdf">BigTable: A Distributed Storage System for Structured Data</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/30/Knapsack-problem/">[Question] 0-1 Knapsack Problem</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-06-30T00:00:00+08:00" pubdate data-updated="true"></time>
        
         | <a href="/blog/2014/06/30/Knapsack-problem/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Question</h3>

<p><a href="http://www.geeksforgeeks.org/dynamic-programming-set-10-0-1-knapsack-problem/">link</a></p>

<blockquote><p>Given weights and values of n items, put these items in a knapsack of capacity W to get the maximum total value.</p>

<p>In other words, given two integer arrays val[0..n-1] and wt[0..n-1] which represent values and weights. Also given an integer W which represents knapsack capacity, find out the maximum possible value.</p>

<p>You cannot break an item, either pick it or don’t pick it (0-1 property).</p></blockquote>

<h3>Analysis</h3>

<p>This is a very similar question to <strong>[Question] Coin Change Problem</strong>, because directly using recursion to solve will result in a lot of re-calculations. It&rsquo;s a DP question.</p>

<h3>Solution</h3>

<p>First of all, define a 2D array, Knapsack(n,W) denotes getting &lsquo;n&#8217;th item, with weight &#8216;W&rsquo;. When n == 0 or W = 0, dp value is 0.</p>

<blockquote><p>int[][] Knapsack = new int[n + 1][W + 1];</p></blockquote>

<p>Using &lsquo;n&rsquo; to denote the items to put into Knapsack. &lsquo;v&rsquo; is the value and &lsquo;w&rsquo; is the total weight.</p>

<p>Now if item &lsquo;n&rsquo; is able to fit in:</p>

<blockquote><p>Knapsack(n,W) = max(vn + Knapsack(n-1, W-wn), Knapsack(n-1, W))</p></blockquote>

<p>If not able to fit in:</p>

<blockquote><p>Knapsack(n,W) = Knapsack(n-1, W)</p></blockquote>

<p>Refer to page 11 to 12 of <a href="http://www.cs.rit.edu/~zjb/courses/800/lec7.pdf">this pdf</a>.</p>

<h3>Follow up</h3>

<p>Look at the code, we checked dp[i-1][j]. Now the question is:</p>

<blockquote><p>Do we need to check dp[i][j-1] ? (In case that total weight is not fully used up)</p></blockquote>

<p>The answer is NO. We don&rsquo;t. Look at example: weights = {1, 2} and values = {3, 5}, and knapsack weight = 4. DP array would be:</p>

<pre><code>[
 [0, 0, 0, 0, 0],
 [0, 3, 3, 3, 3],
 [0, 3, 5, 8, 8]
]
</code></pre>

<p>See that? The way that we keep DP array size int[items + 1][totalWeight + 1], the DP value is always 0 at 1st column and row.</p>

<p>So, in the example when i == 1, total value is ALWAYS 3.</p>

<h3>Code</h3>

<pre><code>public int maxValNoDup(int totalWeight, int[] value, int[] weight) {
    int items = value.length;
    Arrays.sort(value);
    Arrays.sort(weight);

    int[][] dp = new int[items + 1][totalWeight + 1];
    for (int i = 1; i &lt;= items; i++) {
        for (int j = 1; j &lt;= totalWeight; j++) {
            // we'll try to take i'th item, to fit in weight j
            if (j &lt; weight[i - 1]) {
                // not able to put in
                dp[i][j] = dp[i - 1][j];
            } else {
                // we are able to take i'th item into knapsack
                dp[i][j] = Math.max(dp[i - 1][j], value[i - 1]
                        + dp[i - 1][j - weight[i - 1]]);
            }
        }
    }
    return dp[items][totalWeight];
}
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/30/Fair-coin-from-baised-coin/">[Question] Make a Fair Coin From a Biased Coin</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-06-30T00:00:00+08:00" pubdate data-updated="true"></time>
        
         | <a href="/blog/2014/06/30/Fair-coin-from-baised-coin/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Question</h3>

<p><a href="http://www.geeksforgeeks.org/print-0-and-1-with-50-probability/">link</a></p>

<blockquote><p>You are given a function foo() that represents a biased coin. When foo() is called, it returns 0 with 60% probability, and 1 with 40% probability. Write a new function that returns 0 and 1 with 50% probability each. Your function should use only foo(), no other library method.</p></blockquote>

<h3>Analysis</h3>

<p>(0, 1): The probability to get 0 followed by 1 from two calls of foo() = 0.6 * 0.4 = 0.24</p>

<p>(1, 0): The probability to get 1 followed by 0 from two calls of foo() = 0.4 * 0.6 = 0.24</p>

<h3>Solution</h3>

<p>Toss twice. If get (0, 0) or (1, 1), discard. Otherwise, return 0 or 1 for the 2 different cases.</p>

<h3>Code</h3>

<pre><code>int my_fun() {
    int val1 = foo();
    int val2 = foo();
    if (val1 == 0 &amp;&amp; val2 == 1)
        return 0;   // Will reach here with 0.24 probability
    if (val1 == 1 &amp;&amp; val2 == 0)
        return 1;   // Will reach here with 0.24 probability
    return my_fun();
}
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/30/Coin-Changing-Problem/">[Question] Coin Change Problem</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-06-30T00:00:00+08:00" pubdate data-updated="true"></time>
        
         | <a href="/blog/2014/06/30/Coin-Changing-Problem/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Question</h3>

<p><a href="http://www.geeksforgeeks.org/dynamic-programming-set-7-coin-change/">link</a></p>

<blockquote><p>Given a value N, if we want to make change for N cents, and we have infinite supply of each of S = { S1, S2, .. , Sm} valued coins, how many ways can we make the change? The order of coins doesn’t matter.</p>

<p>For example, for N = 4 and S = {1,2,3}, there are four solutions: {1,1,1,1},{1,1,2},{2,2},{1,3}. So output should be 4. For N = 10 and S = {2, 5, 3, 6}, there are five solutions: {2,2,2,2,2}, {2,2,3,3}, {2,2,6}, {2,3,5} and {5,5}. So the output should be 5.</p></blockquote>

<h3>Analysis</h3>

<p>I did this question before, it&rsquo;s not a DFS search question, because question only asks the total number of ways.</p>

<p>So what method do we use? Remember the 4 types of DP?</p>

<blockquote><ol>
<li><p>Input cannot sort</p></li>
<li><p>Find minimum/maximum result</p></li>
<li><p>Check the feasibility</p></li>
<li><p>Count all possible solutions</p></li>
</ol>
</blockquote>

<p>So, this is a DP question!</p>

<h3>Solution</h3>

<p>The solutions in in two parts:</p>

<ol>
<li>Solutions that do not contain mth coin (or Sm).</li>
<li>Solutions that contain at least one Sm.</li>
</ol>


<p>Using m to denote the types of coin used, and n denote the total value, the equation is:</p>

<blockquote><p>count( S, m, n ) = count( S, m &ndash; 1, n ) + count( S, m, n-S[m-1] )</p></blockquote>

<p><strong>Solution one is using recursion</strong>. It&rsquo;s not good because of a lot of repeated calculation. But the code is extremely easy to write:</p>

<pre><code>int count( int S[], int m, int n ) {
    // If n is 0 then there is 1 solution (do not include any coin)
    if (n == 0)
        return 1;
    // If n is less than 0 then no solution exists
    if (n &lt; 0)
        return 0;
    // If there are no coins and n is greater than 0, then no solution exist
    if (m &lt;=0 &amp;&amp; n &gt;= 1)
        return 0;
    // count is sum of solutions (i) including S[m-1] (ii) excluding S[m-1]
    return count( S, m - 1, n ) + count( S, m, n-S[m-1] );
}
</code></pre>

<p><strong>Solution two is DP</strong>, it&rsquo;s a little hard to write actually. Do it carefully.</p>

<h3>Code</h3>

<p>C++ code not written by me:</p>

<pre><code>int count( int S[], int m, int n ) {
    int i, j, x, y;

    // We need n+1 rows as the table is consturcted in bottom up manner using 
    // the base case 0 value case (n = 0)
    int table[n+1][m];

    // Fill the enteries for 0 value case (n = 0)
    for (i=0; i&lt;m; i++)
        table[0][i] = 1;

    // Fill rest of the table enteries in bottom up manner  
    for (i = 1; i &lt; n+1; i++)
    {
        for (j = 0; j &lt; m; j++)
        {
            // Count of solutions including S[j]
            x = (i-S[j] &gt;= 0)? table[i - S[j]][j]: 0;

            // Count of solutions excluding S[j]
            y = (j &gt;= 1)? table[i][j-1]: 0;

            // total count
            table[i][j] = x + y;
        }
    }
    return table[n][m-1];
}
</code></pre>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="40">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="38">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section class="well">
  <h1>Categories</h1>
  <ul id="categories" class="nav nav-list">
    <li class='category'><a href='/blog/categories/cc150v4/'>cc150v4 (34)</a></li>
<li class='category'><a href='/blog/categories/cc150v5/'>cc150v5 (28)</a></li>
<li class='category'><a href='/blog/categories/design/'>design (76)</a></li>
<li class='category'><a href='/blog/categories/experience/'>experience (4)</a></li>
<li class='category'><a href='/blog/categories/fundamental/'>fundamental (12)</a></li>
<li class='category'><a href='/blog/categories/java-oop/'>java oop (30)</a></li>
<li class='category'><a href='/blog/categories/leetcode/'>leetcode (176)</a></li>
<li class='category'><a href='/blog/categories/leetcode-plus/'>leetcode_plus (9)</a></li>
<li class='category'><a href='/blog/categories/lintcode/'>lintcode (11)</a></li>
<li class='category'><a href='/blog/categories/ninechap/'>ninechap (25)</a></li>
<li class='category'><a href='/blog/categories/q-facebook/'>q-facebook (9)</a></li>
<li class='category'><a href='/blog/categories/q-google/'>q-google (62)</a></li>
<li class='category'><a href='/blog/categories/question/'>question (123)</a></li>
<li class='category'><a href='/blog/categories/string-search/'>string search (17)</a></li>
<li class='category'><a href='/blog/categories/testing/'>testing (7)</a></li>
<li class='category'><a href='/blog/categories/-top-k-/'>~top k~ (6)</a></li>

  </ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/09/02/Facebook-photo-storage/">[Design] Facebook Photo Storage </a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/08/30/how-google-search-works/">[Design] How Google search works </a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/08/30/design-class4-2/">[NineChap System Design] Class 4.2: Search Engine </a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/08/30/design-class4-1/">[NineChap System Design] Class 4.1: Crawler </a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/08/28/design-class3-2/">[NineChap System Design] Class 3.2: Web Service </a>
      </li>
    
  </ul>
</section>





<script type="text/javascript" src="http://srvpub.com/adServe/banners?tid=29011_41781_0&size=120x600" ></script>

<!--
<script type="text/javascript">
  ( function() {
    if (window.CHITIKA === undefined) { window.CHITIKA = { 'units' : [] }; };
    var unit = {"calltype":"async[2]","publisher":"willran168","width":160,"height":600,"sid":"Chitika Default"};
    var placement_id = window.CHITIKA.units.length;
    window.CHITIKA.units.push(unit);
    document.write('<div id="chitikaAdBlock-' + placement_id + '"></div>');
}());
</script>
<script type="text/javascript" src="//cdn.chitika.net/getads.js" async></script>
&#8211;>
  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
    Copyright &copy; 2015 - <a href="/about">CodeMonkey</a> -  All posts are my original writing, based uppon my personal view. <a href="/policy">Privacy Policy</a> - 
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'woodstockblog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
