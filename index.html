
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Woodstock Blog</title>
  <meta name="author" content="Charlie Brown">

  
  <meta name="description" content="ref Question Suppose you are handling Amazon website and you have 10 MB size home page. Optimize the homepage for a customer who has 100 kbps &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://okckd.github.io">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Woodstock Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-52495723-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Woodstock Blog</a></h1>
  
    <h2>What's the good of living if you don't try a few things?</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:okckd.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/26/speed-up-web-page-2/">[Design] Speed Up Webpage for Slow Connection (2)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-01-26T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2015/01/26/speed-up-web-page-2/#disqus_thread"
             data-disqus-identifier="http://okckd.github.io/blog/2015/01/26/speed-up-web-page-2/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="www.geeksforgeeks.org/amazon-interview-set-72-campus-sde-1">ref</a></p>

<h3>Question</h3>

<blockquote><p>Suppose you are handling Amazon website and you have 10 MB size home page. Optimize the homepage for a customer who has 100 kbps internet connection.</p>

<p>Further he asked for the customer who has 100 mbps internet connection.</p></blockquote>

<h3>Website KPI</h3>

<p>There are <a href="https://community.compuwareapm.com/community/display/PUB/Best+Practices+on+Web+Site+Performance+Optimization">3 interesting phases</a> of a web site from an end-user performance perspective.</p>

<ol>
<li>First Impression</li>
<li>OnLoad</li>
<li>Fully Loaded Time.</li>
</ol>


<h3>Loading Time</h3>

<p><strong>Question: what percentage of the time a user spends waiting for your page to load is spent after the HTML comes back to their browser</strong>?</p>

<p>It is typically <strong><a href="http://www.sitepoint.com/seven-mistakes-that-make-websites-slow/">over 90%</a></strong>.</p>

<p>Most of the time users spend waiting on your website is spent after the HTML page has been retrieved by their browser.</p>

<h4>Fetching the HTML is just the beginning</h4>

<p><strong>In a nutshell, browsers parse your page’s HTML, sequentially discovering its assets</strong> (such as scripts, stylesheets, and images), requesting and then either parsing and executing them or displaying them as appropriate.</p>

<p>But these assets are not simply fetched all at once. Instead, the <strong>browser opens a limited number of connections to the server(s)</strong> referenced by the page. There is <strong>overhead involved in establishing TCP and HTTP connections</strong>, and some <strong>unavoidable latency</strong> in pushing the request and response bytes back and forth across the network.</p>

<p>So, in general, round trips between the browser and server are expensive. The structure of the HTML markup, the number and the ordering of its assets, are absolutely critical factors in its performance.</p>

<h3>What hijacks your load time</h3>

<h4>1. Too Many HTTP Requests</h4>

<p>This is the single biggest contributor to performance problems in most web pages.</p>

<ol>
<li><p>Concatenate scripts and stylesheets</p></li>
<li><p>Combine images with sprites (put common images into a single large image file, then use CSS to position and selectively display the appropriate portion of the sprite image)</p></li>
<li><p>Use fewer images, more CSS.</p></li>
</ol>


<h4>2. Minimal Client-side Processing</h4>

<ol>
<li><p>Validation on client. (eg. form input)</p></li>
<li><p>Use web standards and MVC separation, making a maintainable, accessible, future-proof and max-performance website.</p>

<p> Think of the HTML as the model, the CSS as the view, and the JavaScript as the controller. This separation tends to make code more efficient and maintainable, and makes many optimization techniques much more practical to apply.</p></li>
<li><p>Push presentation code into the client tier (eg. Charts and graphs — push raw data to the client in JSON format, and use JavaScript and CSS to create pretty graphs.)</p></li>
<li><p>Leverage Ajax techniques (only requiring small parts of the page to change in response to user actions)</p></li>
</ol>


<h4>3. Low Number of Parallel Requests</h4>

<p>Fetch a script, parse and execute it, then fetch another one&hellip; this will use up all the available connections. There are things you can do to your HTML to allow virtually any browser to make many requests at once, which has a huge impact on latency.</p>

<ol>
<li><p>Use browser-appropriate domain sharding</p></li>
<li><p>Use intelligent script loading</p></li>
<li><p>Leverage Keep-Alive (reuse the same TCP connection for multiple HTTP request/response cycles)</p></li>
</ol>


<h4>4. Failure to leverage browser cache / local storage</h4>

<ol>
<li><p><a href="http://www.mnot.net/cache_docs/">HTTP cache overview</a></p></li>
<li><p>Leverage local storage</p></li>
</ol>


<h4>5. Third-party widgets</h4>

<ol>
<li>Avoid third-party widgets!</li>
<li>Try to use widgets that provide asynchronous implementations, so their inevitably terrible performance impacts their widget without dragging down your entire UX with it.</li>
</ol>


<h4>7. Failure to Use a Global Network</h4>

<p>Amazon S3.</p>

<p>Ref: <a href="http://www.sitepoint.com/seven-mistakes-that-make-websites-slow/">http://www.sitepoint.com/seven-mistakes-that-make-websites-slow/</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/26/speed-up-web-page-1/">[Design] Speed Up Webpage for Slow Connection (1)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-01-26T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2015/01/26/speed-up-web-page-1/#disqus_thread"
             data-disqus-identifier="http://okckd.github.io/blog/2015/01/26/speed-up-web-page-1/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="www.geeksforgeeks.org/amazon-interview-set-72-campus-sde-1">ref</a></p>

<h3>Question</h3>

<blockquote><p>Suppose you are handling Amazon website and you have 10 MB size home page. Optimize the homepage for a customer who has 100 kbps internet connection.</p>

<p>Further he asked for the customer who has 100 mbps internet connection.</p></blockquote>

<h3>Reading</h3>

<p><a href="http://sixrevisions.com/web-development/site-speed-performance/">This</a> is a very nice article about website speedup. Below is the full quoted text.</p>

<h4>1. Defer Loading Content When Possible</h4>

<p>Ajax allows us to build web pages that can be <strong>asynchronously updated</strong> at any time. This means that instead of reloading an entire page when a user performs an action, we can simply update parts of that page.</p>

<p>We can use an image gallery as an example. Image files are big and heavy; they can slow down page-loading speeds of web pages. Instead of loading all of the images when a user first visits the web page, we can just display thumbnails of the images and then when the user clicks on them, we can asynchronously request the full-size images from the server and update the page. This way, if a user only wants to see a few pictures, they don’t have to suffer waiting for all of the pictures to download. This development pattern is called <strong>lazy loading</strong>.</p>

<p><strong>Ajax/web development libraries</strong> like jQuery, Prototype, and MooTools can make deferred content-loading easier to implement.</p>

<h4>2. Use External JS and CSS Files</h4>

<p>When the user first loads your web page, the browser will cache external resources like CSS and JavaScript files. Thus, instead of inline JavaScript and CSS files, it’s best to <strong>place them in external files</strong>.</p>

<p>Using inline CSS also increases the rendering time of a web page; having everything defined in your main CSS file lets the browser do less work when rendering the page, since it already knows all the style rules that it needs to apply.</p>

<p><strong>As a bonus</strong>, using external JavaScript and CSS files makes site maintenance easier because you only need to maintain global files instead of code scattered in multiple web pages.</p>

<h4>3. Use Caching Systems</h4>

<p>If you find that your site is connecting to your database in order to create the same content, it’s time to start using a <strong>caching system</strong>. By having a caching system in place, your site will only have to create the content once instead of creating the content every time the page is visited by your users. Don’t worry, caching systems periodically refresh their caches depending on how you set it up — so even constantly-changing web pages (like a blog post with comments) can be cached.</p>

<p><strong>Popular content management systems</strong> like WordPress and Drupal will have <strong>static caching features</strong> that convert dynamically generated pages to static HTML files to reduce unnecessary server processing. For WordPress, check out <a href="https://wordpress.org/plugins/wp-super-cache/">WP Super Cache</a> (one of the six critical WordPress plugins which, claimed by the author, enjoyed a improvement by 259.1% for content-heavy pages). Drupal has a page-caching feature in the core.</p>

<p>There are also <strong>database caching and server-side scripts caching systems</strong> that you can install on your web server (if you have the ability to do so). For example, PHP has extensions called PHP accelerators that optimize performance through caching and various other methods; one example of a <a href="http://en.wikipedia.org/wiki/PHP_accelerator">PHP accelerator</a> is APC. <a href="http://en.wikipedia.org/wiki/Database_caching">Database caching</a> improves performance and scalability of your web applications by reducing the work associated with database read/write/access processes; <strong><a href="http://www.memcached.org/">memcached</a></strong>, for example, caches frequently used database queries.</p>

<h4>8. Load JavaScript at the End of Your Document</h4>

<p>It’s best if you have your scripts loading at the end of the page rather than at the beginning. It allows for the browser to render everything before getting started with the JavaScript. This makes your web pages feel more responsive because the way JavaScript works is that it blocks anything below it from rendering until it has finished downloading. If possible, reference JavaScript right before the closing (body) tag of your HTML documents. To learn more, read about deferring the loading of JavaScript.</p>

<h4>9. Use a Content Delivery Network (CDN)</h4>

<p>Your site’s speed is greatly affected by where the user’s location is, relative to your web server. The farther away they are, the more distance the data being transmitted has to travel. Having your content cached <strong>across multiple, strategically placed geographical locations</strong> helps take care of this problem.</p>

<p>A CDN will often make your operating cost a little higher, but you definitely gain a speed bonus. Check out MaxCDN or <strong>Amazon Simple Storage Service (Amazon S3)</strong>.</p>

<h4>10. Optimize Web Caching</h4>

<p>Along with using caching systems, you should create websites that utilize <strong>web caching</strong> as much as possible. Web caching is when files are <strong>cached by the web browser</strong> for later use. Things that browsers can cache include CSS files, JavaScript files, and images.</p>

<p>Aside from the basics, such as putting CSS and JavaScript code that are used in multiple pages in external files, there are many ways to make sure that you are caching your files in the most efficient way possible.</p>

<p>For example, you can set HTTP response headers such as Expires and Last-Modified to reduce the need of re-downloading certain files when the user comes back to your site. To learn more, read about <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html">caching in HTTP</a> and <a href="https://developers.google.com/speed/docs/insights/LeverageBrowserCaching?csw=1#LeverageBrowserCaching">leveraging browser caching</a>.</p>

<p>To set up HTTP Expires headers in Apache, read this tutorial on adding future expires headers.</p>

<h4>Other mentions</h4>

<ol>
<li><p><strong>Avoid Resizing Images in HTML</strong> (using HTML’s width and height attributes), for the sake of smaller file size.</p></li>
<li><p><strong>Optimize Image Sizes by Using the Correct File Format</strong>. Eg. JPG format often displays photographic images at smaller file sizes than PNG.</p></li>
<li><p><strong>Optimize the Way You Write Code</strong>. For example, instead of using (h1)(em)Your heading(em)(h1), you can easily use CSS to make your headings italics.</p>

<p> Writing code efficiently not only reduces file sizes of your HTML and CSS documents, but also makes it easier to maintain.</p></li>
</ol>


<p>Ref: <a href="http://sixrevisions.com/web-development/site-speed-performance/">http://sixrevisions.com/web-development/site-speed-performance/</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/26/make-java-method-thread-safe/">[Google] Make a Java Method Thread-safe</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-01-26T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2015/01/26/make-java-method-thread-safe/#disqus_thread"
             data-disqus-identifier="http://okckd.github.io/blog/2015/01/26/make-java-method-thread-safe/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Question</h3>

<p><a href="http://www.programcreek.com/2014/02/how-to-make-a-method-thread-safe-in-java/">link</a></p>

<blockquote><p>Consider the following class:</p></blockquote>

<pre><code>class MyCounter {
    private static int counter = 0;

    public static int getCount() {
        return counter++;
    }
}
</code></pre>

<blockquote><p>Is the method thread-safe? How to make it thread-safe?</p></blockquote>

<h3>Solution</h3>

<p><strong>No</strong>, it&rsquo;s not.</p>

<blockquote><p>The method is not thread-safe, because the <strong>counter++ operation is not atomic</strong>, which means it consists more than one atomic operations. In this case, one is accessing value and the other is increasing the value by one.</p>

<p>When Thread 1 accesses the method at t1, Thread 2 may not be done with the method. So the value returned to Thread 1 is the value that has not been increased.</p></blockquote>

<h3>Approach 1</h3>

<p>Adding <strong>synchronized</strong> to this method. This will synchronize the instance of the static class.</p>

<pre><code>class MyCounter {
    private static int counter = 0;

    public static synchronized int getCount() {
        return counter++;
    }
}
</code></pre>

<h3>Approach 2</h3>

<p>We actually can make <strong>count++</strong> atomic by using AtomicInteger from the package &ldquo;java.util.concurrent.atomic&rdquo;.</p>

<p>import java.util.concurrent.atomic.AtomicInteger;</p>

<pre><code>public class MyCounter {
    private static AtomicInteger counter = new AtomicInteger(0);

    public static int getCount() {
        return counter.getAndIncrement();
    }
}
</code></pre>

<h3>Follow-up on thread stack</h3>

<ol>
<li>Each thread has its own stack (never share stack).</li>
<li>All local variables defined in a method will be allocated memory in stack.</li>
<li>When execution completed by a thread, stack frame will be removed.</li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/26/Push-and-Pop-Sequences-Stacks/">[Question] Push and Pop Sequences of Stacks</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-01-26T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2015/01/26/Push-and-Pop-Sequences-Stacks/#disqus_thread"
             data-disqus-identifier="http://okckd.github.io/blog/2015/01/26/Push-and-Pop-Sequences-Stacks/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Question</h3>

<p><a href="http://codercareer.blogspot.sg/2011/11/no-21-push-and-pop-sequences-of-stacks.html">link</a></p>

<blockquote><p>Given two integer sequences, one of which is the push sequence of a stack, please check whether the other sequence is a corresponding pop sequence or not.</p>

<p>For example, if 1, 2, 3, 4, 5 is a push sequence, 4, 5, 3, 2, 1 is a corresponding pop sequence, but the sequence 4, 3, 5, 1, 2 is not.</p></blockquote>

<h3>Solution</h3>

<p>Refer to <a href="http://stackoverflow.com/a/17828345">this answer</a>:</p>

<blockquote><p>Construct the stack:</p>

<p>For each number X in the pop order:</p></blockquote>

<pre><code>If this number is not the same as the top of the stack (or the stack is empty), 
push numbers from the push order until you pushed X. 

If you pushed all numbers and didn't find X, there's no way to get the pop order.

Pop X
</code></pre>

<h3>Code</h3>

<pre><code>public boolean validSequence(int[] input, int[] sequenc) {
    // keep a pointer p in the input[] array
    int len = input.length;
    int p = 0;
    Stack&lt;Integer&gt; stack = new Stack&lt;Integer&gt;();

    int i = 0;
    while (i &lt; len) {
        if (stack.isEmpty()) {
            // just push an element to stack
            stack.push(input[p++]);
        } else {
            // stack got elements, then check top one
            if (stack.peek() == sequenc[i]) {
                // seq found, proceed to next number in seq
                stack.pop();
                i++;
            } else {
                // did not find seq, keep pushing to stack until done
                if (p == len) {
                    return false;
                } else {
                    stack.push(input[p++]);
                }
            }
        }
    }
    return i == len; // or just return true;
}
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/24/distributed-caching-memcached/">[Design] Distributed Caching - Memcached</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-01-24T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2015/01/24/distributed-caching-memcached/#disqus_thread"
             data-disqus-identifier="http://okckd.github.io/blog/2015/01/24/distributed-caching-memcached/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>What is Memcached?</h3>

<p><a href="http://memcached.org/">Memcached</a> is an <strong>in-memory key-value store for small chunks of arbitrary data</strong> (strings, objects) from results of database calls, API calls, or page rendering.</p>

<ol>
<li>Free &amp; open source</li>
<li>high-performance, distributed memory object caching system</li>
<li>generic in nature</li>
<li>intended for use in speeding up dynamic web applications by alleviating database load</li>
</ol>


<p>Definition from <a href="http://en.wikipedia.org/wiki/Memcached">wiki</a>:</p>

<blockquote><p>Memcached is a <strong>general-purpose distributed memory caching system</strong>. It is often used to speed up dynamic database-driven websites by <strong>caching data and objects in RAM</strong> to reduce the number of times an <strong>external data source</strong> (such as a database or API) must be read.</p></blockquote>

<h3>Who uses Memcached?</h3>

<ol>
<li>Facebook</li>
<li>YouTube</li>
<li>Twitter</li>
<li>Amazon</li>
<li>Reddit</li>
<li>Yahoo</li>
<li>Zynga</li>
</ol>


<h3>Why Memcached?</h3>

<p>Run memcached on one or more hosts and then use the shared cache to store objects. Because each host’s RAM is storing information, the access speed <a href="http://www.blogs.zeenor.com/category/interview-questions/page/9">will be much faster than</a> having to load the information from disk. This can provide <strong>a significant performance boost in retrieving data</strong> versus loading the data natively from a database.</p>

<p>Also, because the cache is just a repository for information, you can use the cache to store <strong>any data, including complex structures</strong> that would normally require a significant amount of effort to create, but in <strong>a ready-to-use format</strong>, helping to reduce the load on your MySQL servers.</p>

<h3>FAQ</h3>

<p><strong>What is Memcached?</strong></p>

<p><a href="http://www.web-technology-experts-notes.in/2014/09/memcached-interview-questions-and-answers.html">It is component</a> which stored the data temporary for 1 Hour/ 6 Hour/1 Day etc. When we integrate the Memcached with our application, performance of application increased.</p>

<p>Memcached is open source, high-performance distributed memory object used for caching so that execution can be enhanced at nth level.</p>

<p><strong>Where Memcached can be used?</strong></p>

<p>•  Social Networking &ndash;> Profile Caching
•  Content Aggregation &ndash;> HTML/ Page Caching
•  Ad targeting &ndash;> Cookie/profile tracking
•  Relationship &ndash;> Session caching
•  E-commerce &ndash;> Session and HTML caching
•  Location-based services &ndash;> Data-base query scaling
•  Gaming and entertainment &ndash;> Session caching</p>

<p><strong>Why use Memcached?</strong></p>

<p>•  Speed up application processes
•  It determines what to store and what not to
•  Reduce the number of retrieval requests to the database
•  Cuts down the I/O ( Input/Output) access (hard disk)</p>

<p><strong>In what condition does retrieving cache fail?</strong></p>

<p>•  Memory allocated for the cache is exhausted
•  Item from cache is deleted
•  Individual item in the cache is expired</p>

<p><strong>What is the drawback of Memcached?</strong></p>

<p>•  It is not a persistent data store
•  Not a database
•  It is not an application specific
•  It cannot cache large object</p>

<p><strong>Give more details about memcached failures</strong></p>

<p><a href="http://programmers.stackexchange.com/a/187101">Memcached servers</a> are indeed independent of each other. Memcached server is just an efficient key-value store implemented as in-memory hash table.</p>

<p><strong>What makes memcached distributed is the client</strong>, which in most implementations can connect to a pool of servers. Typical implementations use consistent hashing, which means that when you add or remove server to/from a pool of N servers, you only have to remap 1/N keys.</p>

<p>Typically keys are <strong>not duplicated</strong> on various hosts, as memcached is <strong>not meant to be persistent store</strong> and gives no guarantees that your value will persist (for example when running out of assigned memory, memcached server drops least recently used (LRU) elements). Thus it&rsquo;s assumed that your application should handle missing keys.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/24/design-google-suggest-autocomplete/">[Design] Design Google Suggest (Autocomplete)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-01-24T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2015/01/24/design-google-suggest-autocomplete/#disqus_thread"
             data-disqus-identifier="http://okckd.github.io/blog/2015/01/24/design-google-suggest-autocomplete/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Overview</h3>

<p><strong>Google Suggest</strong> was <a href="http://googleblog.blogspot.sg/2004/12/ive-got-suggestion.html">launched in 2004</a> as a 20% time project from Google engineer Kevin Gibbs. He developed the idea on a <a href="http://www.theatlantic.com/technology/archive/2013/08/how-googles-autocomplete-was-created-invented-born/278991/">Google shuttle bus</a>.</p>

<h3>Design</h3>

<ol>
<li>Use trie.</li>
<li>Use cache (distributed cache)</li>
</ol>


<h4>Trie</h4>

<p><a href="http://stackoverflow.com/questions/7058724/how-to-create-an-efficient-auto-complete">http://stackoverflow.com/questions/7058724/how-to-create-an-efficient-auto-complete</a></p>

<h4>Memcached</h4>

<p>Distributed caching + LRU replacement algorithm. Refer to <strong>[Design] Distributed Caching &ndash; memcached</strong> for more.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/20/top-n-from-sum-2-array/">[Google] Top N Values From Sum of 2 Arrays</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-01-20T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2015/01/20/top-n-from-sum-2-array/#disqus_thread"
             data-disqus-identifier="http://okckd.github.io/blog/2015/01/20/top-n-from-sum-2-array/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Question</h3>

<p><a href="http://www.careercup.com/question?id=3213705">link</a></p>

<blockquote><p>给定两个数组A，B，长度均为n，求A[0]+B[0],…,A[0]+B[n-1],…,A[n-1]+B[0],…,A[n-1]+B[n]总共n<sup>2</sup>个数的最大的n个值。</p></blockquote>

<h3>Solution</h3>

<p>Use a Heap and then iteratively pop 1 and push 2 elements. Until n values has been filled.</p>

<h3>Code</h3>

<pre><code>public int[] topN(int[] arr1, int[] arr2, int n) {
    int[] ans = new int[n];
    int index = n - 1;

    PriorityQueue&lt;Pair&gt; heap = new PriorityQueue&lt;Pair&gt;(n,
            new SpecialComparator(arr1, arr2));
    Arrays.sort(arr1);
    Arrays.sort(arr2);

    Pair maxPair = new Pair(n - 1, n - 1);
    heap.add(maxPair);

    for (int i = 0; i &lt; n; i++) {
        Pair next = heap.poll();
        ans[index--] = arr1[next.x] + arr2[next.y];
        if (next.y - 1 &gt;= 0) {
            heap.add(new Pair(next.x, next.y - 1));
        }
        if (next.x - 1 &gt;= 0) {
            heap.add(new Pair(next.x - 1, next.y));
        }
    }
    return ans;
}

class SpecialComparator implements Comparator&lt;Pair&gt; {

    int[] arr1, arr2;

    public SpecialComparator(int[] a1, int[] a2) {
        arr1 = a1;
        arr2 = a2;
    }

    @Override
    public int compare(Pair p1, Pair p2) {
        // note that larger value shall go up top of the heap, so -1 * ...
        return -1 * (arr1[p1.x] + arr2[p1.y] - arr1[p2.x] - arr2[p2.y]);
    }
}
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/20/java-vector-arraylist/">[Java OOP] Java Vector and ArrayList</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-01-20T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2015/01/20/java-vector-arraylist/#disqus_thread"
             data-disqus-identifier="http://okckd.github.io/blog/2015/01/20/java-vector-arraylist/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Difference</h3>

<ol>
<li><p>Vectors are synchronized, ArrayLists are not.</p></li>
<li><p>Data Growth Methods</p>

<p> <a href="http://stackoverflow.com/a/2986307">A Vector defaults to</a> doubling the size of its array, while the ArrayList increases its array size by 50 percent.</p></li>
</ol>


<h3>Similarities</h3>

<ol>
<li><p>Both Vector and ArrayList use <strong>growable array</strong> data structure.</p></li>
<li><p>They both are <strong>ordered collection classes</strong> as they maintain the elements insertion order.</p></li>
<li><p>Vector &amp; ArrayList both allows duplicate and null values.</p></li>
<li><p>They both grows and shrinks automatically when overflow and deletion happens.</p></li>
</ol>


<p><a href="http://beginnersbook.com/2013/12/difference-between-arraylist-and-vector-in-java/">source</a></p>

<h3>History</h3>

<p>The vector was not the part of collection framework &ndash; it has been included in collections later. It can be considered as <strong>Legacy code</strong>.</p>

<p><strong>There is nothing about Vector which List collection cannot do</strong>. Therefore Vector should be avoided. If there is a need of thread-safe operation, make ArrayList synchronized.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/20/java-abstract-class-interface/">[Java OOP] Interface and Abstract Classes</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-01-20T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2015/01/20/java-abstract-class-interface/#disqus_thread"
             data-disqus-identifier="http://okckd.github.io/blog/2015/01/20/java-abstract-class-interface/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h3>Overview</h3>

<p><a href="http://www.programmerinterview.com/index.php/java-questions/interface-vs-abstract-class/">source</a></p>

<p><strong>A class</strong> must be declared abstract when it has one or more <strong>abstract methods</strong>.</p>

<p><strong>An interface</strong> differs from an abstract class because an interface is not a class. An interface is essentially a type that <strong>can be satisfied by any class</strong> that implements the interface.</p>

<h3>Abstract classes: strong relationship</h3>

<p><strong>Abstract classes</strong> are meant to be inherited from, and often <strong>indicates a strong relationship</strong>.</p>

<p>For instance, if we have an abstract base class called &ldquo;Canine&rdquo;, any deriving class should be an animal that belongs to the Canine family (like a Dog or a Wolf).</p>

<p><strong>With an interface on the other hand</strong>, the relationship is <strong>not necessarily strong</strong>.</p>

<p>For example, if we have a class called &ldquo;House&rdquo;, that class could also implement an interface called &ldquo;AirConditioning&rdquo;. Having air conditioning not an essential part of a House.</p>

<p><strong>A TownHouse</strong> is a type of House, that relationship is very strong, and would be more appropriately defined <strong>through inheritance</strong> instead of interfaces.</p>

<h3>What&rsquo;s more</h3>

<ol>
<li><p>Multiple inheritance</p>

<p> Java class can inherit from only one abstract class, but can implement multiple interfaces.</p></li>
<li><p>Abstract method</p>

<p> Abstract class can have non-abstract methods with actual implementation details.</p></li>
</ol>


<h3>When to use which</h3>

<p><strong>Use abstract class when</strong>:</p>

<ol>
<li><p>You want to <strong><a href="http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html">share code</a></strong> among several closely related classes.</p></li>
<li><p>you want to be able to declare <strong>non-public members</strong>. In an interface, all methods must be public.</p></li>
<li><p>you think you will need to <strong>add methods</strong> in the future.</p>

<p> Because if you add new method headings to an interface, then all of the classes that already implement that interface will have to be changed to implement the new methods. That can be quite a hassle.</p></li>
</ol>


<p><strong>Use interface when</strong>:</p>

<ol>
<li><p>You expect that <strong>unrelated classes</strong> would implement your interface. For example, the interfaces <strong>Comparable and Cloneable</strong> are implemented by many unrelated classes.</p></li>
<li><p>you think that the API will not change for a while.</p></li>
<li><p>you want to have something similar to multiple inheritance.</p></li>
</ol>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/01/20/difference-http-https/">[Design] Difference Between HTTP and HTTPS</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2015-01-20T00:00:00+08:00" pubdate data-updated="true"></time>
        
           | <a href="/blog/2015/01/20/difference-http-https/#disqus_thread"
             data-disqus-identifier="http://okckd.github.io/blog/2015/01/20/difference-http-https/">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://stackoverflow.com/a/8375247">ref</a></p>

<h4>1: What are benefits of using HTTPS over HTTP?</h4>

<p>HTTPS means that you <strong>tunnel the HTTP protocol over TLS/SSL</strong> which encrypts the HTTP payload.</p>

<p>So the benefit is that HTTP requests and responses are transmitted securely over the wire, e.g. your Internet Service Provider does not know what you&rsquo;re doing.</p>

<p><a href="http://stackoverflow.com/a/548042">When Google switched Gmail to use HTTPS</a>, no additional resources were required; no network hardware, no new hosts. It only increased CPU load by about 1%.</p>

<h4>2: How to use HTTPS?</h4>

<p>Enable it at your endpoint, in general <strong>a web server in front of your application server</strong>. Most web servers (e.g. IIS, Apache) support this by configuration. Depending on your confidentiality requirements this may not be enough.</p>

<h4>3: Can we use HTTPS for only login purpose and then onwords HTTP?</h4>

<p>Technically this is possible, but it introduces some security risks. Example: After a secured login you transmit session IDs identifying the user. If you transmit those session IDs unsecurely (no SSL), session hijacking becomes a risk (&lsquo;man-in-the-middle&rsquo;)</p>

<h4>4: What settings needs to be done for making website HTTPS?</h4>

<p>See #2. In public internet scenarios you should request (buy) a certificate from a certain Certificate Authority (CA), so that end user clients can verify whether they should trust your certificate.</p>

<h4>5: Is there any threat present in HTTPS?</h4>

<p>In the protocol itself there is a slight risk of <strong>man-in-the-middle attacks</strong>. E.g. a proxy between the client and server could pretend to be the server itself (this requires a successful attack to network infrastructure, e.g. DNS). There are several other &lsquo;more obscure&rsquo; risks that do not relate to the protocol itself, e.g.:</p>

<ol>
<li>usage of an outdated encryption key length (e.g. 256 bit)</li>
<li>loss of private keys or unappropriate key management procedures (e.g. send via unencrypted email)</li>
<li>certificate authority failure</li>
</ol>


<h4>6: Is processing time required for HTTPS is greater than HTTP?</h4>

<p>Yes, key negotiation (handshaking) <strong>requires a lot CPU capacity</strong>.</p>

<p><img class="middle" src="/assets/images/http-vs-https.png"></p>

<h3>Port Number</h3>

<p>HTTP uses <strong>port 80 or 8080</strong>, while HTTPS uses <strong>TCP port 443</strong>.</p>

<p><a href="http://www.coderanch.com/t/168608/java-Web-Component-SCWCD/certification/Diff">The reason</a> that some applications use 8080 (7080, 9080) instead of 80 is that on UNIX, <strong>port numbers below 1024</strong> are reserved for <strong>super-user</strong> processes.</p>

<p>That&rsquo;s why for OS compatibility reasons, some servers use other ports (greater than 1024). But they still have &ldquo;80&rdquo; inside the numner, eg. 7080, 8080, 9080.</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/2">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section class="well">
  <h1>Categories</h1>
  <ul id="categories" class="nav nav-list">
    <li class='category'><a href='/blog/categories/cc150v4/'>cc150v4 (34)</a></li>
<li class='category'><a href='/blog/categories/cc150v5/'>cc150v5 (28)</a></li>
<li class='category'><a href='/blog/categories/design/'>design (60)</a></li>
<li class='category'><a href='/blog/categories/experience/'>experience (3)</a></li>
<li class='category'><a href='/blog/categories/facebook/'>facebook (9)</a></li>
<li class='category'><a href='/blog/categories/fundamental/'>fundamental (5)</a></li>
<li class='category'><a href='/blog/categories/google/'>google (46)</a></li>
<li class='category'><a href='/blog/categories/java-oop/'>java oop (24)</a></li>
<li class='category'><a href='/blog/categories/leetcode/'>leetcode (153)</a></li>
<li class='category'><a href='/blog/categories/leetcode-plus/'>leetcode_plus (9)</a></li>
<li class='category'><a href='/blog/categories/lintcode/'>lintcode (11)</a></li>
<li class='category'><a href='/blog/categories/ninechap/'>ninechap (15)</a></li>
<li class='category'><a href='/blog/categories/question/'>question (104)</a></li>
<li class='category'><a href='/blog/categories/string-search/'>string search (7)</a></li>
<li class='category'><a href='/blog/categories/testing/'>testing (7)</a></li>
<li class='category'><a href='/blog/categories/top-k/'>top k (7)</a></li>

  </ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/01/26/speed-up-web-page-2/">[Design] Speed Up Webpage for Slow Connection (2)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/01/26/speed-up-web-page-1/">[Design] Speed Up Webpage for Slow Connection (1)</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/01/26/make-java-method-thread-safe/">[Google] Make a Java Method Thread-safe</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/01/26/Push-and-Pop-Sequences-Stacks/">[Question] Push and Pop Sequences of Stacks</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/01/24/distributed-caching-memcached/">[Design] Distributed Caching - Memcached</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Charlie Brown -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'woodstockblog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
