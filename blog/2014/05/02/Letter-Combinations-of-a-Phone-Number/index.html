
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>[LeetCode 17] Letter Combinations of a Phone Number - Woodstock Blog</title>
  <meta name="author" content="Charlie Brown">

  
  <meta name="description" content="Question link Given a digit string, return all possible letter combinations that the number could represent. A mapping of digit to letters (just like &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://okckd.github.io/blog/2014/05/02/Letter-Combinations-of-a-Phone-Number">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Woodstock Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-52495723-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Woodstock Blog</a></h1>
  
    <h2>What's the good of living if you don't try a few things?</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:okckd.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">[LeetCode 17] Letter Combinations of a Phone Number</h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-05-02T00:00:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


<div class="entry-content"><h3>Question</h3>

<p><a href="http://oj.leetcode.com/problems/letter-combinations-of-a-phone-number/">link</a></p>

<div class="question-content">
            <p></p><p>Given a digit string, return all possible letter combinations that the number could represent.
</p>

<p>
A mapping of digit to letters (just like on the telephone buttons) is given below.</p>
<p><img src="http://upload.wikimedia.org/wikipedia/commons/thumb/7/73/Telephone-keypad2.svg/200px-Telephone-keypad2.svg.png"></p>

<pre><b>Input:</b>Digit string "23"
<b>Output:</b> ["ad", "ae", "af", "bd", "be", "bf", "cd", "ce", "cf"].
</pre>

<p>
<b>Note:</b><br>
Although the above answer is in lexicographical order, your answer could be in any order you want.
</p><p></p>
          </div>


<h3>Stats</h3>

<table border="2">
    <tr>
        <td>Frequency</td>
        <td bgcolor="yellow">3</td>
    </tr>
    <tr>
        <td>Diffficulty</td>
        <td bgcolor="yellow">3</td>
    </tr>
    <tr>
        <td>Adjusted Difficulty</td>
        <td bgcolor="yellow">3</td>
    </tr>
    <tr>
        <td>Time to use</td>
        <td bgcolor="lime">20 minutes</td>
    </tr>
</table>


<p>Ratings/Color = 1(white) 2(lime) 3(yellow) 4/5(red)</p>

<h3>Analysis</h3>

<p><strong>Altough this question is not difficult, IT IS VERY IMPORTANT</strong>. The way that recuisive/non-recursive calls are handled are very frequently examed in interviewed.</p>

<p>This question can be split into 2 sub-questions.</p>

<ol>
<li><p><strong>How to convert an number into a String (i.e. 2->&lsquo;abc&rsquo; etc.)</strong> There are 2 way: <strong>math way</strong>, or the <strong>simple way</strong>. I list 2 codes below, the first of which is written by me. The second piece using HashMap is most popular in other people&rsquo;s solutions, for example <a href="http://rafal.io/posts/leetcode-18-letter-combinations-of-a-phone-number.html">this one</a>. Some people also use array of string to achieve the same result.</p></li>
<li><p><strong>How to implement the code</strong>. There might be n digits, so using n nested-loops can solve the problem, but unable to code. There are 2 ways as well: <strong>recursive method</strong>, and <strong>non-recursive method</strong>. Please refer the solutions section.</p></li>
</ol>


<p>Number convert String, Math way:</p>

<pre><code>private String getLetters(int key) {
    if (key &lt;= 1 || key &gt;= 10) return "";
    // key must be in the range of [2,9]
    char first = (char) ('a' + (key - 2) * 3);
    if (key &gt;= 8) first++;
    String letters = "";
    for (int i = 0; i &lt; 4; i++) {
        if (i == 3 &amp;&amp; !(key == 7 || key == 9)) break;
        letters += first++;
    }
    return letters;
}
String letters = getLetters('3' - '0');
</code></pre>

<p>HashMap way(execute time is slightly higher):</p>

<pre><code>static final HashMap&lt;Character, String&gt; map = new HashMap&lt;Character, String&gt;() {
    {
        put('2', "abc");
        put('3', "def");
        put('4', "ghi");
        put('5', "jkl");
        put('6', "mno");
        put('7', "pqrs");
        put('8', "tuv");
        put('9', "wxyz");
    }
};
String letters = map.get('3');
</code></pre>

<h3>Solution</h3>

<p>As mentioned, there are 2 ways to code.</p>

<p><strong>Recursive method</strong> seems easy at first. I split the digits into head (the first digit) and tail (the rest). For example &ldquo;142&rdquo;, the head = 1, tail = 42. Then I use nested loop to concatenate all letters for head, and all answers for tail and get the correct answer. However, <strong>the code uses a lot of List and does not look cool</strong>. The performance however, is the same as the other recursive method.</p>

<p><strong>Now I will explain another (maybe better) recursive method</strong>. Keep an array of char, and a counter. In the beginning, counter = 0, array is empty. Then fill in the first position of the array, and increate counter by 1. Do this recursively until counter reach the last digit (at this point, insert the char array into answer set). <strong>Be very cautious about how the array is passed</strong>. Array is pass by reference, so the array keep getting changed. There shouldn&rsquo;t cause any trouble if your code is correct, but keep in mind that <strong>during recursive call, variables passed by reference is shared by all calls. This might be dangerous unless you handle it well</strong> (like use of counter). Otherwise, simply always create new objects like I did in the first code (2 arraylist are created in the first code, and 0 in the second code).</p>

<p>I printed execution stack for second code, which gives better illustration.</p>

<p>Call letterCombinations(&ldquo;29&rdquo;);</p>

<p>Success time: 0.07 memory: 380224 signal:0</p>

<p>len = 0, one is a
len = 1, one is a w
len = 1, one is a x
len = 1, one is a y
len = 1, one is a z
len = 0, one is b z
len = 1, one is b w
len = 1, one is b x
len = 1, one is b y
len = 1, one is b z
len = 0, one is c z
len = 1, one is c w
len = 1, one is c x
len = 1, one is c y
len = 1, one is c z</p>

<p><strong>Last, and the most important, is the non-recursive method</strong>. This idea is very intereting. 2 list are kept, first is called ans, and second called newAns. Now get all letters for next digit, and concatenate will all current ans using nested loop. Say currently all strings in ans is length 3, then after concatenate, the length because 4, and added to newAns. When all combinations are added to newAns, newAns become a list of string of length 4. Now one digit is finished. <strong>Before proceed to next digit, set ans = newAns, and clear newAns</strong>. Code below.</p>

<h3>My code</h3>

<p>The first recursive method (my code)</p>

<pre><code>public ArrayList&lt;String&gt; letterCombinations(String digits) {
    ArrayList&lt;String&gt; ans = new ArrayList&lt;String&gt;();
    if (digits.length() == 0) {
        ans.add("");
        return ans;
    }
    ArrayList&lt;String&gt; tailAns = this
            .letterCombinations(digits.substring(1));
    String headStr = this.getLetters(digits.charAt(0) - '0');
    for (char head : headStr.toCharArray()) {
        for (String tail : tailAns) 
            ans.add(head + tail);
    }
    return ans;
}

private String getLetters(int key) {
    if (key &lt;= 1 || key &gt;= 10) return "";
    char first = (char) ('a' + (key - 2) * 3);
    if (key &gt;= 8) first++;
    String letters = "";
    for (int i = 0; i &lt; 4; i++) {
        if (i == 3 &amp;&amp; !(key == 7 || key == 9)) break;
        letters += first++;
    }
    return letters;
}
</code></pre>

<p>Second recursive method (learnt and rewritten by me)</p>

<pre><code>public ArrayList&lt;String&gt; letterCombinations(String digits) {
    ArrayList&lt;String&gt; ans = new ArrayList&lt;String&gt;();
    char[] one = new char[digits.length()];
    fill(ans, one, 0, digits);
    return ans;
}

private void fill(ArrayList&lt;String&gt; ans, char[] one, int len, String digits) {
    if (len == one.length) {
        ans.add(String.valueOf(one));
        return;
    }
    String possibleChars = getLetters(digits.charAt(0) - '0');
    for (char c: possibleChars.toCharArray()) {
        one[len] = c;
        fill(ans, one, len+1, digits.substring(1));
    }
}

private String getLetters(int key) {
    if (key &lt;= 1 || key &gt;= 10) return "";
    char first = (char) ('a' + (key - 2) * 3);
    if (key &gt;= 8) first++;
    String letters = "";
    for (int i = 0; i &lt; 4; i++) {
        if (i == 3 &amp;&amp; !(key == 7 || key == 9)) break;
        letters += first++;
    }
    return letters;
}
</code></pre>

<p><strong>The non-recursive method (learnt and rewritten by me)</strong></p>

<p>To demostrate how <strong>HashMap</strong> is used, I changed the convertion method as well.</p>

<pre><code>public ArrayList&lt;String&gt; letterCombinations(String digits) {
        ArrayList&lt;String&gt; ans = new ArrayList&lt;String&gt;();
        ArrayList&lt;String&gt; newAns = new ArrayList&lt;String&gt;();
        ans.add("");
        for (int i = 0; i &lt; digits.length(); i ++) {
            String letters = map.get(digits.charAt(i));
            for (int j = 0; j &lt; letters.length(); j ++) {
                for (String cur: ans) {
                    newAns.add(cur + letters.charAt(j));
                }
            }
            ans = newAns;
            newAns = new ArrayList&lt;String&gt;();
        }
        return ans;
}

static final HashMap&lt;Character, String&gt; map = new HashMap&lt;Character, String&gt;() {
    {
        put('2', "abc");
        put('3', "def");
        put('4', "ghi");
        put('5', "jkl");
        put('6', "mno");
        put('7', "pqrs");
        put('8', "tuv");
        put('9', "wxyz");
    }
};
</code></pre>

<p><strong>Updated June 14th, rewrote the code using template</strong></p>

<p>It could have been better <a href="http://answer.ninechapter.com/solutions/letter-combinations-of-a-phone-number/">writing with StringBuilder</a>, but I think it&rsquo;s minor.</p>

<pre><code>public List&lt;String&gt; letterCombinations(String digits) {
    List&lt;String&gt; ans = new LinkedList&lt;String&gt;();
    if (digits == null) {
        return ans;
    }
    String[] pad = new String[]{
        " ","","abc","def","ghi","jkl","mno","pqrs","tuv","wxyz"};
    helper(ans, "", pad, digits, 0);
    return ans;
}

private void helper(List&lt;String&gt; ans, String path, String[] pad, String digits, int pos) {
    if (path.length() == digits.length()) {
        ans.add(path);
        return;
    }
    String letters = pad[digits.charAt(pos) - '0'];
    for (int i = 0; i &lt; letters.length(); i++) {
        path += letters.charAt(i) + "";
        helper(ans, path, pad, digits, pos + 1);
        path = path.substring(0, path.length() - 1);
    }
}
</code></pre>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Charlie Brown</span></span>

      








  


<time datetime="2014-05-02T00:00:00+08:00" pubdate data-updated="true"></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/leetcode/'>leetcode</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://okckd.github.io/blog/2014/05/02/Letter-Combinations-of-a-Phone-Number/" data-via="" data-counturl="http://okckd.github.io/blog/2014/05/02/Letter-Combinations-of-a-Phone-Number/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2014/05/02/3Sum-Closest/" title="Previous Post: [LeetCode 16] 3Sum Closest">&laquo; [LeetCode 16] 3Sum Closest</a>
      
      
        <a class="basic-alignment right" href="/blog/2014/05/02/Remove-Nth-Node-From-End-of-List/" title="Next Post: [LeetCode 19] Remove Nth Node From End of List">[LeetCode 19] Remove Nth Node From End of List &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section class="well">
  <h1>Categories</h1>
  <ul id="categories" class="nav nav-list">
    <li class='category'><a href='/blog/categories/cc150v4/'>cc150v4 (34)</a></li>
<li class='category'><a href='/blog/categories/cc150v5/'>cc150v5 (26)</a></li>
<li class='category'><a href='/blog/categories/classic/'>classic (3)</a></li>
<li class='category'><a href='/blog/categories/design/'>design (51)</a></li>
<li class='category'><a href='/blog/categories/facebook/'>facebook (4)</a></li>
<li class='category'><a href='/blog/categories/google/'>google (35)</a></li>
<li class='category'><a href='/blog/categories/leetcode/'>leetcode (155)</a></li>
<li class='category'><a href='/blog/categories/leetcode-plus/'>leetcode_plus (9)</a></li>
<li class='category'><a href='/blog/categories/lintcode/'>lintcode (11)</a></li>
<li class='category'><a href='/blog/categories/ninechap/'>ninechap (15)</a></li>
<li class='category'><a href='/blog/categories/octopress/'>octopress (1)</a></li>
<li class='category'><a href='/blog/categories/question/'>question (85)</a></li>
<li class='category'><a href='/blog/categories/testing/'>testing (7)</a></li>
<li class='category'><a href='/blog/categories/thoughts/'>thoughts (7)</a></li>
<li class='category'><a href='/blog/categories/top-k/'>top k (5)</a></li>
<li class='category'><a href='/blog/categories/twitter/'>twitter (3)</a></li>

  </ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/09/29/">[CC150v5] 14.</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/09/28/get-rank-stream-integers/">[CC150v5] 11.8 Get Rank in Stream of Integers</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/09/27/Order-array-by-sorting-middle/">[CC150v5] 17.6 Order an Array by Sorting Middle</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/09/26/implement-circular-array-java/">[CC150v5] 14.6 Implement CircularArray in Java</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/09/24/troubleshoot-google-chrome/">[CC150v5] Chap12 Example - Troubleshoot Google Chrome</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Charlie Brown -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
