<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
	<head>
		<meta http-equiv="content-type" content="text/html;charset=utf-8" />
		<title>[LeetCode Plus] Sliding Window Maximum  - Woodstock Blog</title>
		<meta name="author" content="Charlie Brown">
		
		<meta name="description" content="Question link A long array A[] is given to you. There is a sliding window of size w which is moving from the very left of the array to the very right &hellip;">
    	
    	<meta name="viewport" content="width=device-width; initial-scale=1; maximum-scale=1">
    
		<link href="/atom.xml" rel="alternate" title="Woodstock Blog" type="application/atom+xml">
	    <link href="/favicon.png" rel="shortcut icon">
	    <link rel="canonical" href="">
		<link rel="stylesheet" type="text/css" href="/stylesheets/style.css" />
		<link rel="stylesheet" type="text/css" href="/stylesheets/syntax.css" />
		<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
		
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-52495723-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


	</head>

	<body>
		<div id="logo">
	<span id="tags"> 编程 / 思考 / 阅读 / 生活 </span>
	<h1><a href="/">Woodstock Blog</a></h1>
</div>
		<div id="wrapper">
			<div id="content">
				<a target="_blank" style="float:right;margin-top:15px" href="http://twitter.com/share?url=http://blog.libingcun.com/blog/2014/07/27/Sliding-Window-Maximum/&via=libingcun&text=[LeetCode Plus] Sliding Window Maximum "><span class="balloon">retweet</span></a>
				<h2>[LeetCode Plus] Sliding Window Maximum </h2>
				<div class="cnt">
					<h3>Question</h3>

<p><a href="http://leetcode.com/2011/01/sliding-window-maximum.html">link</a></p>

<blockquote><p>A long array A[] is given to you. There is a sliding window of size w which is moving from the very left of the array to the very right. You can only see the w numbers in the window. Each time the sliding window moves rightwards by one position. Following is an example:
The array is [1, 3, -1, -3, 5, 3, 6, 7], and w is 3.</p></blockquote>

<pre><code>Window position                Max
---------------               -----
[1  3  -1] -3  5  3  6  7       3
 1 [3  -1  -3] 5  3  6  7       3
 1  3 [-1  -3  5] 3  6  7       5
 1  3  -1 [-3  5  3] 6  7       5
 1  3  -1  -3 [5  3  6] 7       6
 1  3  -1  -3  5 [3  6  7]      7
</code></pre>

<blockquote><p>Input: A long array A[], and a window width w</p>

<p>Output: An array B[], B[i] is the maximum value of from A[i] to A[i+w-1]</p></blockquote>

<h3>Analysis</h3>

<p><strong>The  naive approach is using a Heap</strong>. This time complexity is O(n*logn). However, there is a better way using a (double-ended) queue.</p>

<p><strong>We do not need to <a href="http://n00tc0d3r.blogspot.sg/2013/04/sliding-window-maximum.html">keep all numbers</a></strong>. For example, suppose numbers in a window of size 4 are (1, 3, -1, 2). Obviously, no matter what next numbers are, 1 and -1 are never going to be a maximal as the window moving. The queue should look like (3, 2) in this case.</p>

<h3>Solution</h3>

<ol>
<li>When moves to a new number, iterate through back of the queue, removes all numbers that are not greater than the new one, and then insert the new one to the back.</li>
<li>FindMax only need to take the first one of the queue.</li>
<li>To remove a number outside the window, only compare whether the current index is greater than the front of queue. If so, remove it.</li>
</ol>


<p><a href="http://leetcode.com/2011/01/sliding-window-maximum.html">A natural way</a> most people would think is to try to maintain the queue size the same as the window’s size. Try to break away from this thought and think out of the box.</p>

<h3>Code</h3>

<p>written by me</p>

<pre><code>public int[] slidingWindowMax(int[] array, int w) {
    int[] ans = new int[array.length - w + 1];
    List&lt;Integer&gt; q = new LinkedList&lt;Integer&gt;();
    // Queue stores indices of array, and values are in decreasing order.
    // In this way, the top element in queue is the max in window
    for (int i = 0; i &lt; array.length; i++) {
        // 1. remove element from head until first number within window
        if (!q.isEmpty() &amp;&amp; q.get(0) + w &lt;= i) {
            // it's OK to change 'while' to 'if' in the line above
            // cuz we actually remove 1 element at most
            q.remove(0);
        }
        // 2. before inserting i into queue, remove from the tail of the
        // queue indices with smaller value they array[i]
        while (!q.isEmpty() &amp;&amp; array[q.get(q.size() - 1)] &lt;= array[i]) {
            q.remove(q.size() - 1);
        }
        q.add(i);
        // 3. set the max value in the window (always the top number in
        // queue)
        if (i + 1 &gt;= w) {
            ans[i + 1 - w] = array[q.get(0)];
        }
    }
    return ans;
}
</code></pre>

					<br />
					--EOF--
					<p>若无特别说明，本站文章均为原创，转载请保留链接，谢谢</p>
				</div>
				<div id="disqus_thread"></div>
				

<script type="text/javascript">
      var disqus_shortname = 'woodstockblog';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://okckd.github.io/blog/2014/07/27/Sliding-Window-Maximum/';
        var disqus_url = 'http://okckd.github.io/blog/2014/07/27/Sliding-Window-Maximum/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>


			</div>
			
			<div id="footer">
				<span style="color:#bbb;font-size:12px">To do less than best is a sin.</span>
<p style="clear:both"></p>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.1/jquery.min.js"></script>
			</div>
		</div>
	</body>
</html>

