
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>[LeetCode 4] Median of Two Sorted Arrays - Woodstock Blog</title>
  <meta name="author" content="Charlie Brown">

  
  <meta name="description" content="Question link There are two sorted arrays A and B of size m and n respectively. Find the median of the two sorted arrays. The overall run time &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://okckd.github.io/blog/2014/04/26/Median-of-Two-Sorted-Arrays">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Woodstock Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-52495723-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Woodstock Blog</a></h1>
  
    <h2>What's the good of living if you don't try a few things?</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:okckd.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">[LeetCode 4] Median of Two Sorted Arrays</h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-04-26T00:00:00+08:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


<div class="entry-content"><h3>Question</h3>

<p><a href="https://oj.leetcode.com/problems/median-of-two-sorted-arrays/">link</a></p>

<div class="question-content">
<p></p><p>There are two sorted arrays A and B of size m and n respectively. Find the median of the two sorted arrays. The overall run time complexity should be O(log (m+n)).</p>
<p></p>
</div>


<h3>Stats</h3>

<table border="2">
    <tr>
        <td>Frequency</td>
        <td bgcolor="yellow">3</td>
    </tr>
    <tr>
        <td>Diffficulty</td>
        <td bgcolor="red">5</td>
    </tr>
    <tr>
        <td>Adjusted Difficulty</td>
        <td bgcolor="red">5</td>
    </tr>
    <tr>
        <td>Time to use</td>
        <td bgcolor="red">infiinty</td>
    </tr>
</table>


<h3>Analysis</h3>

<p><strong>This is a very tough question</strong>. I read a lot but struggles even now.</p>

<p>Note that the 2 arrays have <strong>different sizes</strong> (i.e. m and n). <strong>If the size of the 2 arrays are same</strong> (which is a special case of this question), there is a much easier &ldquo;Divide and Conquer&rdquo; solution. The idea is to compare the median of 2 arrays and eliminate half of each array every time. Details, look <a href="http://www.geeksforgeeks.org/median-of-two-sorted-arrays/">this post</a>.</p>

<p>Now for this questions.</p>

<p>This solution is covered in the <a href="http://www2.myoops.org/course_material/mit/NR/rdonlyres/Electrical-Engineering-and-Computer-Science/6-046JFall-2005/30C68118-E436-4FE3-8C79-6BAFBB07D935/0/ps9sol.pdf">MIT CLRS handouts</a>. The basic idea is, finding the median of the first array, then assuming this number is the final median, and look where this element should have been put in the second array. There are 3 possible conditions. For example, if the arrays are {1, 4, 5, 6, 26} and {2, 13, 34}. We first get number 5, and compare it with 13. Then we know that median shall be large than 5, and we continue this (sort of) binary search with O(lgn) complexity.</p>

<h3>Solution</h3>

<p>I referred to NineChap for the &lsquo;find (K)th&rsquo; solution.</p>

<h3>My code</h3>

<p><strong>Code from <a href="http://answer.ninechapter.com/solutions/median-of-two-sorted-arrays/">ninechap</a></strong></p>

<pre><code>public double findMedianSortedArrays(int A[], int B[]) {
    int len = A.length + B.length;
    if (len % 2 == 0) {
        return (findKth(A, 0, B, 0, len / 2) + findKth(A, 0, B, 0, len / 2 + 1)) / 2.0 ;
    } else {
        return findKth(A, 0, B, 0, len / 2 + 1);
    }
}

// find kth number of two sorted array
public static int findKth(int[] A, int A_start, int[] B, int B_start, int k){       
    if(A_start &gt;= A.length) 
        return B[B_start + k - 1];
    if(B_start &gt;= B.length)
        return A[A_start + k - 1];

    if (k == 1)
        return Math.min(A[A_start], B[B_start]);

    int A_key = A_start + k / 2 - 1 &lt; A.length
                ? A[A_start + k / 2 - 1]
                : Integer.MAX_VALUE;
    int B_key = B_start + k / 2 - 1 &lt; B.length
                ? B[B_start + k / 2 - 1]
                : Integer.MAX_VALUE; 

    if (A_key &lt; B_key) {
        return findKth(A, A_start + k / 2, B, B_start, k - k / 2);
    } else {
        return findKth(A, A_start, B, B_start + k / 2, k - k / 2);
    }
}
</code></pre>

<p><strong>Updated on July 6th</strong>: I finally wrote this code by myself. It&rsquo;s difficult to write.</p>

<pre><code>public double findMedianSortedArrays(int A[], int B[]) {
    int len1 = A.length;
    int len2 = B.length;
    if ((len1 + len2) % 2 == 1) {
        return findKth(A, B, 0, 0, (len1 + len2) / 2);
    } else {
        int num1 = findKth(A, B, 0, 0, (len1 + len2) / 2 - 1);
        int num2 = findKth(A, B, 0, 0, (len1 + len2) / 2);
        return (double) (num1 + num2) / 2;
    }
}

private int findKth(int A[], int B[], int start1, int start2, int k) {
    int len1 = A.length;
    int len2 = B.length;
    if (start1 &gt;= len1) {
        return B[start2 + k];
    } 
    if (start2 &gt;= len2) {
        return A[start1 + k];
    } 
    if (k == 0) {
        return Math.min(A[start1], B[start2]);
    }
    // now eliminate half of the size of k (half &gt;= 1)
    int half = (k + 1) / 2;
    int aMid = start1 + half - 1 &lt; len1 ? A[start1 + half - 1] : Integer.MAX_VALUE;
    int bMid = start2 + half - 1 &lt; len2 ? B[start2 + half - 1] : Integer.MAX_VALUE;
    if (aMid &lt; bMid) {
        // discard size of half from A
        return findKth(A, B, start1 + half, start2, k - half);
    } else {
        // discard size of half from B
        return findKth(A, B, start1, start2 + half, k - half);
    }
}
</code></pre>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Charlie Brown</span></span>

      








  


<time datetime="2014-04-26T00:00:00+08:00" pubdate data-updated="true"></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/leetcode/'>leetcode</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://okckd.github.io/blog/2014/04/26/Median-of-Two-Sorted-Arrays/" data-via="" data-counturl="http://okckd.github.io/blog/2014/04/26/Median-of-Two-Sorted-Arrays/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2014/04/25/LeetCode-stats/" title="Previous Post: LeetCode Statistics">&laquo; LeetCode Statistics</a>
      
      
        <a class="basic-alignment right" href="/blog/2014/04/26/two-sum/" title="Next Post: [LeetCode 1] Two Sum">[LeetCode 1] Two Sum &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section class="well">
  <h1>Categories</h1>
  <ul id="categories" class="nav nav-list">
    <li class='category'><a href='/blog/categories/cc150v4/'>cc150v4 (36)</a></li>
<li class='category'><a href='/blog/categories/cc150v5/'>cc150v5 (8)</a></li>
<li class='category'><a href='/blog/categories/classic/'>classic (3)</a></li>
<li class='category'><a href='/blog/categories/design/'>design (51)</a></li>
<li class='category'><a href='/blog/categories/facebook/'>facebook (4)</a></li>
<li class='category'><a href='/blog/categories/google/'>google (31)</a></li>
<li class='category'><a href='/blog/categories/leetcode/'>leetcode (155)</a></li>
<li class='category'><a href='/blog/categories/leetcode-plus/'>leetcode_plus (9)</a></li>
<li class='category'><a href='/blog/categories/lintcode/'>lintcode (11)</a></li>
<li class='category'><a href='/blog/categories/ninechap/'>ninechap (15)</a></li>
<li class='category'><a href='/blog/categories/octopress/'>octopress (1)</a></li>
<li class='category'><a href='/blog/categories/question/'>question (84)</a></li>
<li class='category'><a href='/blog/categories/testing/'>testing (5)</a></li>
<li class='category'><a href='/blog/categories/thoughts/'>thoughts (7)</a></li>
<li class='category'><a href='/blog/categories/top-k/'>top k (5)</a></li>
<li class='category'><a href='/blog/categories/twitter/'>twitter (3)</a></li>

  </ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/09/10/top-million-from-billion/">[CC150v4] 20.6 Top Million From Billion</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/09/10/generate-m-from-array-of-n/">[CC150v4] 20.3 Generate M Int From Array of Size N</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/09/10/full-text-search/">[CC150v4] 20.8 Full Text Search</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/09/10/find-subsquare-with-same-border/">[CC150v4] 20.11 Find Subsquare With Same Border</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/09/10/count-2s-in-digits/">[CC150v4] 20.4 Count 2s in Digits</a>
      </li>
    
  </ul>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Charlie Brown -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
